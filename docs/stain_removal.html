<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.280">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Professor Adam Dennett FRGS FAcSS, Professor of Urban Analytics, Bartlett Centre for Advanced Spatial Analysis, University College London - a.dennett@ucl.ac.uk - @adam_dennett">

<title>Brighton and Hove Secondary Schools Admission - Evidence Pages - Addendum - Stain Removal</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-HFKH18TWMG"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-HFKH18TWMG', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="Brighton and Hove Secondary Schools Admission - Evidence Pages - Addendum - Stain Removal">
<meta property="og:description" content="First of all, I’d like to say that I’m very grateful the Cllr Taylor and his team have been reading my analysis so carefully.">
<meta property="og:site-name" content="Brighton and Hove Secondary Schools Admission - Evidence Pages">
<meta name="twitter:title" content="Brighton and Hove Secondary Schools Admission - Evidence Pages - Addendum - Stain Removal">
<meta name="twitter:description" content="First of all, I’d like to say that I’m very grateful the Cllr Taylor and his team have been reading my analysis so carefully.">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Brighton and Hove Secondary Schools Admission - Evidence Pages</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./data_processing_scripts.qmd">
 <span class="menu-text">Data Processing</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="./about.qmd">
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./schools_wk2.html">
 <span class="menu-text">Week 2 Analysis</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./schools_wk3.html">
 <span class="menu-text">Week 3 Analysis</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./stain_removal.html" aria-current="page">
 <span class="menu-text">Stain Removal</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://adamdennett.co.uk"><i class="bi bi-person-circle" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/adam_dennett"><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-bi-github" role="button" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-bi-github">    
        <li>
    <a class="dropdown-item" href="https://github.com/adamdennett/BH_Schools_2">
 <span class="dropdown-text">Source Code</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/adamdennett/BH_Schools_2/issues">
 <span class="dropdown-text">Report a Bug</span></a>
  </li>  
    </ul>
  </li>
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
  <li><a href="#new-analysis---are-we-stained-again" id="toc-new-analysis---are-we-stained-again" class="nav-link" data-scroll-target="#new-analysis---are-we-stained-again">New Analysis - Are we stained again?</a>
  <ul class="collapse">
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data">Data</a></li>
  <li><a href="#disadvantaged-vs-non-disadvantaged-pupils" id="toc-disadvantaged-vs-non-disadvantaged-pupils" class="nav-link" data-scroll-target="#disadvantaged-vs-non-disadvantaged-pupils">Disadvantaged vs Non-Disadvantaged Pupils</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#conclusions" id="toc-conclusions" class="nav-link" data-scroll-target="#conclusions">Conclusions</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/adamdennett/BH_Schools_2/blob/main/stain_removal.qmd" class="toc-action">View source</a></p><p><a href="https://github.com/adamdennett/BH_Schools_2/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Addendum - Stain Removal</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Professor Adam Dennett FRGS FAcSS, Professor of Urban Analytics, Bartlett Centre for Advanced Spatial Analysis, University College London - a.dennett@ucl.ac.uk - <span class="citation" data-cites="adam_dennett">@adam_dennett</span> </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>First of all, I’d like to say that I’m very grateful the Cllr Taylor and his team have been reading my analysis so carefully.</p>
<p>Yesterday I received an email from Jacob alerting me that he’d discovered an issue and was concerned that some of the messages from parents he’d been receiving were using incorrect facts. In particular, in relation the attainment gap I reported in <a href="https://adamdennett.github.io/BH_Schools_2/schools_wk3.html#a-stain-on-our-city---really">this section</a> of my last piece.</p>
<p>Having looked at the point he raised and having carried out some new analysis with the data that the council had originally used to produce the graph below, I’m happy to report that three of the four observations I originally made still stand - and indeed are strengthened by the new analysis, so I would like to thank them for that (<em>if only a link to the data had been provided on the original documentation, we might not have even got here!</em>).</p>
<p>One observation on the attainment gap has changed - the gap in Brighton is larger relative to the rest of the country than originally estimated, however the new data has allowed us to explore why this is. We can now see very clearly that both disadvantaged pupils <em>AND</em> non-disadvantaged pupils perform <em>ABOVE</em> the national average (median) in England (even including London).</p>
<p>I’ll repeat that - In Brighton both <strong><em>disadvantaged</em></strong> pupils <strong>AND</strong> <strong><em>non-disadvantaged</em></strong> pupils perform <strong><em>ABOVE</em></strong> the national average (median) for GCSE grades 5-9 Attainment in Maths and English. Above.</p>
<p>The gaps is because the non-disadvantaged pupils perform <strong><em>even better</em></strong> than average - meaning the gap is larger relative to other places with similar achievement for disadvantaged pupils.</p>
<p>Here is the original graph from the council:</p>
<p><img src="images/stain.png" class="img-fluid" style="width:75.0%"></p>
<p>Now the graph that Cllr Taylor was concerned about in my last analysis was this one:</p>
<p><img src="images/stain2.png" class="img-fluid"></p>
<p>Now, the issue Cllr Taylor alerted me to relates to the two green dots at the top of this chart.</p>
<p>Here’s the point he raised: “You have compared Disadvantaged Attainment to <strong><em>All Pupil</em></strong> attainment, which is not how the Attainment Gap is calculated. Disadvantaged attainment has to be compared to Non-Disadvantaged Attainment (not all pupils).”</p>
<p>A good point - and a correct one. An even better point had it have been raised when he put his own slides together as you can see that this is exactly what the bar chart at the top is showing!</p>
<p>But mistakes happen - my graph above was actually using FSM regional data below the green dots - not ideal, but the best I could lay my hands on at the time without a link to the original data. Fortunately, Cllr Taylor was kind enough to send me the link to the <a href="https://explore-education-statistics.service.gov.uk/find-statistics/key-stage-4-performance">original data</a>, and after a bit of digging around I found the correct file and have been able to correct the analysis.</p>
<section id="new-analysis---are-we-stained-again" class="level2">
<h2 class="anchored" data-anchor-id="new-analysis---are-we-stained-again">New Analysis - Are we stained again?</h2>
<p>Well, short answer is, no. We are no more stained than we were before.</p>
<p>There still appears to be some confusion, which hopefully this bit of analysis will clear up once and for all.</p>
<p>Cllr Taylor - “Non-Disadvantaged attainment in Brighton and Hove was 57.5 in 2022-23, giving us an attainment gap of 33.5.” - looking at the data, this observation is true.</p>
<p>Cllr Taylor on Facebook - “Indeed - when compared to individual local authorities, our city has the 16th highest attainment gap of 152 local authorities - nearly in the top decile.” - this observation is false. Brighton and Hove, with an attainment gap of 33.5%, ranks 56 of 298 Local Authorities in that dataset. I’m not sure where this figure of 16th came from, it is not borne out in the data as I will show below.</p>
<section id="data" class="level3">
<h3 class="anchored" data-anchor-id="data">Data</h3>
<p>The file I have used in the subsequent analysis is called <em>2233_sl_lad_fsm_dis_data_revised.csv</em> – the data in Cllr Taylor’s original graph comes from the field “pt_l2basics_95” - Percentage of pupils achieving grades 5 or above in English and Mathematics GCSEs.</p>
<p>I pre-filtered that file above (I know, I’d normally do it all in R but today I did filter in excel first - slaps-wrists). Those two files, derived from <em>2233_sl_lad_fsm_dis_data_revised.csv</em> downloaded from <a href="https://explore-education-statistics.service.gov.uk/find-statistics/key-stage-4-performance">here</a> can be downloaded from <a href="https://www.dropbox.com/scl/fi/3g8wmdocqn0du3rikagte/dis_vs_non.csv?rlkey=6n8m416q41nsqpdndf2jebahz&amp;dl=0">here</a> and <a href="https://www.dropbox.com/scl/fi/penjbjr196k4wb9gvplp8/all_vs_disadv.csv?rlkey=daxgv1op76z5yh3c42ygb4p3a&amp;dl=0">here</a>. OK, so w’re all set.</p>
<p>We can plot that Brighton data. And even better than showing England and the South East, we can show all Local Authorities in England. This gives us a much better way of comparing where Brighton sits relative to everywhere else. We can view this data below in a histogram:</p>
<div class="cell">

</div>
<div class="cell">

</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="stain_removal_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Figure 1 - Disadvantaged Pupils vs Total</p>
<ul>
<li><p>First thing to say is I am aware that this is stil the WRONG data - the disadvantaged pupils in this graph are also included in the Total - so double counted. I will correct this in the next graph, but it’s useful to see that it actually doesn’t make a huge amount of difference. Still, it’s worth doing things properly.</p></li>
<li><p>The second thing to note is The median values for disadvantaged pupils and advantaged pupils are shown by the solid lines, with the Brighton and Hove values in dashed lines.</p></li>
<li><p>The third thing to note is this is a histogram. Each bar represents a count of local authorities that fall into the range of the x-axis value. It’s a nice way of seeing where Brighton sits relative to every other local authority in the country.</p></li>
<li><p>As the dotted lines for Brighton fall to the right of the solid vertical lines, it means that Brighton is above the median for 9-5 Maths and English GSCE grades for both disadvantaged and advantaged pupils. Advantaged pupils do achieve a bit higher above average then disadvantaged pupils.</p></li>
</ul>
</section>
<section id="disadvantaged-vs-non-disadvantaged-pupils" class="level3">
<h3 class="anchored" data-anchor-id="disadvantaged-vs-non-disadvantaged-pupils">Disadvantaged vs Non-Disadvantaged Pupils</h3>
<p>Below is a slightly different histogram created with slightly different data from the same table. The disadvantaged data are exactly the same, but this time it is paired with data for non-disadvantaged pupils. If you add the two together, you get the total data from the previous graph. This is a better way of representing the data as it doesn’t double count the disadvantaged pupils.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="stain_removal_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>What’s changed - well not very much. The frequency distribution has changed on the right as the data are different, but:</p>
<ul>
<li><p>Brighton still does better than average for both its disadvantaged and non-disadvantaged pupils.</p></li>
<li><p>The second important thing to note is the size of the gap between the solid line and the dotted line for disadvantaged and non-disadvantaged pupils. It is smaller on the left than on the right. This is because the non-disadvantaged pupils are doing better than the disadvantaged pupil, relatively speaking. Although they are both performing above the national average.</p></li>
<li><p>The attainment gap is the gap between the two dotted lines and in this data, as Cllr Taylor correctly pointed out, it’s 33.5%.</p></li>
</ul>
<p>But how does attainment and the gap compare with the rest country?</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="stain_removal_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>The graph above ranks every local authority in England by the performance of disadvantaged pupils. And it’s clear to see that Brighton is in the top half - as we would know from the histogram above.</li>
<li>It’s also clear that the relationship between disadvantaged and non-disadvantaged pupils is not the same across the country. In some places, the gap is much smaller, in others larger, but no discernable pattern between the two at this stage.</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<p><img src="stain_removal_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>But what about the gap? Given there is so much noise, it would make sense to try and standardise the gap by either disadvantaged or non-disadvantaged attainment. If we look at the gap relative to advantaged attainment – i.e.&nbsp;how do Disadvantaged students do relative to the performance of the advantaged students in the same local authority – a reasonable way of standardising - we get the plot above.</p>
<p>What this shows is that in Brighton, the gap of 33.5% between disadvantaged (24%) and advantaged (57.5%) pupils is around 58% of that higher level of achievement in the City. Lower figures are better in this particular graph, so this gap is not in the top half of the English league table, but as the histogram above shows from the same data, this is because non-disadvantaged students are doing even better than the disadvantaged students, who are already doing better than average.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="stain_removal_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li>One final plot adds a regional perspective - again, this is just disadvantaged pupils, but it’s clear to see here the effect of London on the data. Brighton is in the top half of the country, a very large number of local authorities at the top of the distribution are in London.</li>
</ul>
</section>
</section>
</section>
<section id="conclusions" class="level1">
<h1>Conclusions</h1>
<p>Having carried out this new analysis and looked back at what I observed in my last piece, it doesn’t change very much at all the interpretation I posted – indeed it makes some comments more secure, with only one small change in interpretation relative to the gap.</p>
<p>Let’s take each one in turn:</p>
<ol type="1">
<li>Compared to the national average for England, Brighton’s attainment at GCSE for pupils on Free School Meals is lower, however, that national average is being pulled up considerably by London, which is performing between 6.5% and 15.1% better than the best-performing non-London region
<ol type="1">
<li>New interpretation - Compared to the national average for England, Brighton’s attainment at GCSE for disadvantaged pupils HIGHER, and that national average is being pulled up considerably by London, we’re most local authorities are performing between man percentage points hight than the best-performing non-London local authorities.</li>
</ol></li>
<li>If Brighton were one of these 33 regions, it would still be achieving better results for pupils on FSM than 2/3 of other places in England. If we take London out of the equation, it would appear in the top 5.
<ol type="1">
<li>New Interpretation – For disadvantaged Pupils, Brighton ranks 106 out of 298 local authorities on this level of attainment – this means it achieving better results for disadvantaged pupils than 2/3 of other places in England. If we take London out of the equation, it would rank considerably higher</li>
</ol></li>
<li>Rather than being ‘a stain on our city’, it should be regarded as a badge of pride that Brighton and Hove is able to achieve such good results for pupils in receipt of Free School Meals, relative to the rest of England.
<ol type="1">
<li>New interpretation - Rather than being ‘a stain on our city’, it should be regarded as a badge of pride that Brighton and Hove is able to achieve such good results for pupils disadvantaged pupils, relative to the rest of England.</li>
</ol></li>
<li>If we look at the attainment gap between those who are on Free School Meals and those who aren’t as well, Brighton still performs far better than average, even with London in the equation. If Brighton were one of the regions above, it would be just outside the top 1/3.
<ol type="1">
<li>New Interpretation - If we look at the attainment gap between disadvantaged pupils and non-disadvantaged pupils, Brighton still performs worse than average if we look at the raw gap, even with London in the equation. If we look at the gap relative to the non-disadvantaged pupils in the city, it would rank 130th worst out of 298 local authorities – so in the bottom half. However, if we examine the national medians for disadvantaged and non-disadvantaged, Brighton is above average for both and it’s larger gap is only because non-disadvantaged students are doing even better than average.</li>
</ol></li>
<li>My comments on this being a distraction for the real problem existing in Whitehawk – still remain valid.</li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>