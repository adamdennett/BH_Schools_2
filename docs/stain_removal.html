<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Professor Adam Dennett FRGS FAcSS, Professor of Urban Analytics, Bartlett Centre for Advanced Spatial Analysis, University College London - a.dennett@ucl.ac.uk - @adam_dennett">

<title>Addendum - Educational Performance in Brighton – Brighton and Hove Secondary Schools Admission - Evidence Pages</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-HFKH18TWMG"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-HFKH18TWMG', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="Addendum - Educational Performance in Brighton – Brighton and Hove Secondary Schools Admission - Evidence Pages">
<meta property="og:description" content="">
<meta property="og:site_name" content="Brighton and Hove Secondary Schools Admission - Evidence Pages">
<meta name="twitter:title" content="Addendum - Educational Performance in Brighton – Brighton and Hove Secondary Schools Admission - Evidence Pages">
<meta name="twitter:description" content="">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Brighton and Hove Secondary Schools Admission - Evidence Pages</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./data_processing_scripts.html"> 
<span class="menu-text">Data Processing</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="./about.qmd"> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./schools_wk2.html"> 
<span class="menu-text">Week 2 Analysis</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./schools_wk3.html"> 
<span class="menu-text">Week 3 Analysis</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./stain_removal.html" aria-current="page"> 
<span class="menu-text">Addendum</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./factsheet.html"> 
<span class="menu-text">Factsheet</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://adamdennett.co.uk"> <i class="bi bi-person-circle" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/adam_dennett"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-bi-github" role="link" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-bi-github">    
        <li>
    <a class="dropdown-item" href="https://github.com/adamdennett/BH_Schools_2">
 <span class="dropdown-text">Source Code</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/adamdennett/BH_Schools_2/issues">
 <span class="dropdown-text">Report a Bug</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
  <li><a href="#new-analysis---are-we-still-stained" id="toc-new-analysis---are-we-still-stained" class="nav-link" data-scroll-target="#new-analysis---are-we-still-stained">New Analysis - Are we still stained?</a></li>
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data">Data</a>
  <ul class="collapse">
  <li><a href="#gcse-grade-5-9-english-and-maths-2024" id="toc-gcse-grade-5-9-english-and-maths-2024" class="nav-link" data-scroll-target="#gcse-grade-5-9-english-and-maths-2024">GCSE Grade 5-9, English and Maths, 2024</a></li>
  </ul></li>
  <li><a href="#analysis" id="toc-analysis" class="nav-link" data-scroll-target="#analysis">Analysis</a>
  <ul class="collapse">
  <li><a href="#disadvantaged-vs-non-disadvantaged-pupils" id="toc-disadvantaged-vs-non-disadvantaged-pupils" class="nav-link" data-scroll-target="#disadvantaged-vs-non-disadvantaged-pupils">Disadvantaged vs Non-Disadvantaged Pupils</a></li>
  <li><a href="#gcse-grade-4-9-english-and-maths-2024" id="toc-gcse-grade-4-9-english-and-maths-2024" class="nav-link" data-scroll-target="#gcse-grade-4-9-english-and-maths-2024">GCSE Grade 4-9, English and Maths, 2024</a></li>
  </ul></li>
  <li><a href="#the-education-policy-institute-work" id="toc-the-education-policy-institute-work" class="nav-link" data-scroll-target="#the-education-policy-institute-work">The Education Policy Institute Work</a></li>
  </ul></li>
  <li><a href="#conclusions" id="toc-conclusions" class="nav-link" data-scroll-target="#conclusions">Conclusions</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/adamdennett/BH_Schools_2/blob/main/stain_removal.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li><li><a href="https://github.com/adamdennett/BH_Schools_2/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Addendum - Educational Performance in Brighton</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Professor Adam Dennett FRGS FAcSS, Professor of Urban Analytics, Bartlett Centre for Advanced Spatial Analysis, University College London - a.dennett@ucl.ac.uk - <span class="citation" data-cites="adam_dennett">@adam_dennett</span> </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>*<em>Note, I have made a few adjustments below to the original piece - adjusting for both Higher Tier Local Authorities. I have also included an additional section on the Education Policy Institute’s Work, especially related to their methodology in their Annual Report - <a href="https://epi.org.uk/annual-report-2024-foreword-executive-summary/" class="uri">https://epi.org.uk/annual-report-2024-foreword-executive-summary/</a> and why it should be given more weight than the raw DfE data - I have also, for completeness, provided graphs for <strong>Percentage of pupils achieving grades 9-4 or above in English and mathematics GCSEs -</strong> (in addition to 9-5).</em></p>
<p>First of all, I’d like to say that I’m very grateful the Cllr Taylor and his team have been reading my analysis so carefully.</p>
<p>Yesterday I received an email from Jacob alerting me that he’d discovered an issue and was concerned that some of the messages from parents he’d been receiving were using incorrect facts. In particular, in relation the attainment gap I reported in <a href="https://adamdennett.github.io/BH_Schools_2/schools_wk3.html#a-stain-on-our-city---really">this section</a> of my last piece.</p>
<p>Having looked at the point he raised and having carried out some new analysis with the data that the council had originally used to produce the graph below, I’m happy to report that almost all of observations I originally made still stand - and indeed are strengthened further by the new analysis, so I would like to thank them for that.</p>
<p>I would like to state that while I am very grateful for the link to some actual, real, verifiable data, it’s disappointing that the first time the council were able to provide this was two days <strong><em>AFTER</em></strong> the end of the engagement exercise. This goes back to my original point in my very first piece of work - that the council need be more transparent and up-front with the data they use to make decisions and indeed charge their rhetoric. I’m glad that they have now provided this data, but it would have been much more useful to have had it at the start of the process.</p>
<p>One observation on the attainment gap has changed in the light of this new analysis - the gap in Brighton is larger relative to the rest of the country than originally estimated from the Council’s original graph (which I assume will now be corrected). However the new data has allowed us to explore <strong><em>why</em></strong> this is. We can now see very clearly that both disadvantaged pupils <em>AND</em> non-disadvantaged pupils perform <em>ABOVE</em> the national average (median) in England (even including London).</p>
<p>I’ll repeat that - In Brighton both <strong><em>disadvantaged</em></strong> pupils <strong>AND</strong> <strong><em>non-disadvantaged</em></strong> pupils perform <strong><em>ABOVE</em></strong> the national average (median) for GCSE grades 5-9 Attainment in Maths and English. Above.</p>
<p>The gap is because the non-disadvantaged pupils perform <strong><em>even better</em></strong> than average - meaning the gap is larger relative to other places with similar achievement for disadvantaged pupils.</p>
<p>Here is the original graph from the council:</p>
<p><img src="images/stain.png" class="img-fluid" style="width:75.0%"></p>
<p>Now the graph that Cllr Taylor was concerned about in my last analysis was this one:</p>
<p><img src="images/stain2.png" class="img-fluid"></p>
<p>Now, the issue Cllr Taylor alerted me to relates to the two green dots at the top of this chart.</p>
<p>Here’s the point he raised: “You have compared Disadvantaged Attainment to <strong><em>All Pupil</em></strong> attainment, which is not how the Attainment Gap is calculated. Disadvantaged attainment has to be compared to Non-Disadvantaged Attainment (not all pupils).”</p>
<p>A good point - and a correct one. An even better point had it have been raised when he put his own slides together, as you can see that this is exactly what the bar chart at the top is showing! I used their data. In drawing these green dots and time was short and data was sparse, I took the figures from the Council graph.</p>
<p>But mistakes happen - the rest of my graph above (below the green dot) was actually using FSM regional data - not ideal, but the best I could lay my hands on at the time without a link to the original data. As I note above, Cllr Taylor was kind enough to send me the link to the <a href="https://explore-education-statistics.service.gov.uk/find-statistics/key-stage-4-performance">original data</a>, and after a bit of digging around I found the correct file and have been able to correct the analysis.</p>
<section id="new-analysis---are-we-still-stained" class="level2">
<h2 class="anchored" data-anchor-id="new-analysis---are-we-still-stained">New Analysis - Are we still stained?</h2>
<p>Well, short answer is, no. We are no more stained than we were before. And much of the stain (the attainment gap in Brighton being worse than the attainment gap nationally) is actually an artefact of the council using the wrong ‘average’ - as I will explain below. Had they used the correct average - the median - a different picture emerges.</p>
<p>There still appears to be some confusion online, which hopefully this bit of analysis will clear up once and for all.</p>
<ul>
<li><p>Cllr Taylor - “Non-Disadvantaged attainment in Brighton and Hove was 57.5 in 2022-23, giving us an attainment gap of 33.5.” - looking at the data, this observation is <strong><em>true</em></strong>.</p></li>
<li><p>Cllr Taylor on Facebook - “Indeed - when compared to individual local authorities, our city has the 16th highest attainment gap of 152 local authorities - nearly in the top decile.” This observation is true, when looking at just one of the possible attainment gap variables, - the <strong><em>Percentage of pupils achieving grades 5 or above in English and Mathematics GCSEs</em></strong> - however as is pointed out by the <a href="https://epi.org.uk/annual-report-2024-methodology-2/">Educational Policy Institute in their annual report</a> - the average GCSE score across English and Maths in England, was 4.6. So in using this variable is effectively representing the - above-average attainment gap. However this is the ‘raw’ gap (i.e.&nbsp;a gap of 10-20% pass rate is the same as a gap from 30-40% pass rate - same gap, very different story).</p></li>
</ul>
</section>
<section id="data" class="level2">
<h2 class="anchored" data-anchor-id="data">Data</h2>
<section id="gcse-grade-5-9-english-and-maths-2024" class="level3">
<h3 class="anchored" data-anchor-id="gcse-grade-5-9-english-and-maths-2024">GCSE Grade 5-9, English and Maths, 2024</h3>
<p>The file I have used in the analysis below is called <strong><em>2233_sl_lad_fsm_dis_data_revised.csv</em></strong> (downloaded from <a href="https://explore-education-statistics.service.gov.uk/find-statistics/key-stage-4-performance">here</a>) – I am now almost certain that the data in Cllr Taylor’s original graph comes from the field “pt_l2basics_95” - <strong><em>Percentage of pupils achieving grades 5 or above in English and Mathematics GCSEs.</em></strong> Even more specifically, the 50% for Brighton comes from cell W266 in that file and the 24% for disadvantaged pupils comes from Cell W262 in the same sheet.</p>
<p>I pre-filtered that file above (I know, I’d normally do it all in R but today I did filter in excel first - slaps-wrists - but I really wanted to eyeball the data first to make sure mistakes did not creep in). Those two files, derived from <em>2233_sl_lad_fsm_dis_data_revised.csv</em> can be downloaded from <a href="https://www.dropbox.com/scl/fi/3g8wmdocqn0du3rikagte/dis_vs_non.csv?rlkey=6n8m416q41nsqpdndf2jebahz&amp;dl=0">here</a> and <a href="https://www.dropbox.com/scl/fi/penjbjr196k4wb9gvplp8/all_vs_disadv.csv?rlkey=daxgv1op76z5yh3c42ygb4p3a&amp;dl=0">here</a>. (note in the underlying code, I have now adjusted to read the original file in and filter and aggregate on the fly). OK, so we’re all set.</p>
</section>
</section>
<section id="analysis" class="level2">
<h2 class="anchored" data-anchor-id="analysis">Analysis</h2>
<p>We can plot that Brighton data. And even better than showing England and the South East, we can show all Local Authorities (upper and lower-tier now) in England. This gives us a much better way of comparing where Brighton sits relative to everywhere else. We can view this data below in a histogram:</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stain_removal_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Figure 1 - Disadvantaged Pupils vs Total</p>
<ul>
<li><p>First thing to say is I am aware that this is still the “<strong><em>wrong</em></strong>” data - the disadvantaged pupils in this graph are also included in the Total - so double counted. I will correct this in the next graph, but it’s useful to have this here to see that it actually doesn’t make a huge amount of difference. Still, it’s worth doing things properly.</p></li>
<li><p>The second thing to note is The median values for disadvantaged pupils and advantaged pupils are shown by the solid lines, with the Brighton and Hove values in dashed lines.</p>
<ul>
<li><p>As an important aside, I have used the <strong><em>median</em></strong> value as my measure of ‘average’ here - this is actually quite important and something the Council overlooked in their original bar-chart shown at the top where it appears they have used the artithmetic <strong><em>mean</em></strong>. Both are measures of central tendancy (mode being the other one that you might have heard of at school), but median is more appropriate where there there might be outliers (London, for example) and a a skewed distribution (more values at one end of the distribution as we can see in the disadvantaged historam above), and the reason why I have used it here. (There are various online guides as to when to use Median rather than mean, but most will probably start with <a href="https://en.wikipedia.org/wiki/Median">wikipedia</a> - this BBC Bitesize guide is also genuinely great - <a href="https://www.bbc.co.uk/bitesize/articles/z99jpbk" class="uri">https://www.bbc.co.uk/bitesize/articles/z99jpbk</a>)</p></li>
<li><p>Relatedly, much of the original “stain” that was identified was because the figure of 25.4% for England was the arithmetic mean for the country (according to the data - [40,074/157,963]*100). This is the average disadvantaged 9-5 Maths GCES Pass rate across all children in the county. However, if we took all of local pass rates for each local Authority - e.g.&nbsp;Brighton and Hove = 129/537 = 24% - and do the same for every other local authority, then median is the middle value in this set - and is 21.9%. Brighton is above average - as we already know by looking at the histogram above.</p></li>
</ul></li>
<li><p>The third thing to note is this is a <strong><em>histogram</em></strong>. Not a bar chart. Each bar represents a <strong><em>count</em></strong> of local authorities that fall into the range of the x-axis value. It’s a nice way of seeing where Brighton sits relative to every other local authority in the country. If you look where Brighton is (on the blue side of the graph), it means there are another 22 local authorities (out of 298) whose total number of pupils achieving 9-5 grades in English and Maths is between 49-51%.</p></li>
<li><p>As the dotted lines for Brighton fall to the right of the solid vertical lines, it means that Brighton is above the median for 9-5 Maths and English GSCE grades for both disadvantaged <strong><em>and</em></strong> advantaged pupils. Advantaged pupils do achieve a bit higher above the average than disadvantaged pupils.</p></li>
</ul>
<section id="disadvantaged-vs-non-disadvantaged-pupils" class="level3">
<h3 class="anchored" data-anchor-id="disadvantaged-vs-non-disadvantaged-pupils">Disadvantaged vs Non-Disadvantaged Pupils</h3>
<p>Below is a slightly different histogram created with slightly different rows of data from the same dataset. The disadvantaged data are exactly the same, but this time it is paired with data for non-disadvantaged pupils. If you add the two together, you get the total data from the previous graph. This is a better way of representing the data as it doesn’t double count the disadvantaged pupils.</p>
<section id="minor-adjustment-for-geography" class="level4">
<h4 class="anchored" data-anchor-id="minor-adjustment-for-geography">Minor Adjustment for Geography</h4>
<p><em>There was a bit of a flurry of excitement on Facebook as originally in this piece I had used standard (“Lower Tier”) local authorities (as this is geography the data comes in). My lack of understanding was mocked as I should have known (as everyone surely does!) - that what matters for education policy is “Upper Tier” local authorities - sometimes known as Local Education Authorities. Ok fine, now is not the time to get into distributions of academies and free schools which are outside of the control of local authorities, let’s just see if upper tier makes any difference.</em></p>
<p><em>I managed to source a <a href="https://geoportal.statistics.gov.uk/datasets/ec2949b8c037460bbc2891323927e931_0/explore">lookup-table from the ONS</a> so have been able to aggregate the original data up to the Upper Tier level for comparison. My data now <strong>exactly</strong> matches that used by Cllr Taylor, so we’re all good.</em></p>
<p><em>As it’s the same data, just a bit more aggregated, things haven’t changed much. We get some statistical smoothing going on (see my last piece for <a href="https://adamdennett.github.io/BH_Schools_2/schools_wk3.html#the-importance-of-boundaries-and-distributions-of-people-within-them">a bit of a guide on statistical smoothing</a>) which shifts the medians a little - about 1% for the disadvantaged group, but nothing which changes the interpretation. See below.</em></p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stain_removal_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Figure 2a - Achievement, disadvantaged and non-disadvantaged, 153 “Upper Tier” Local Authorities (Local Education Authorities - LEAs)</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stain_removal_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Figure 2b - Achievement, disadvantaged and non-disadvantaged, 153 “Upper Tier” Local Authorities (Local Education Authorities - LEAs)</p>
<p><em>Note - text below refers to the bottom of these two histograms - the original lower-tier data. When aggregating to ‘upper-tier’ the median for disadvantaged students is 22.97%. At lower tier, the median is 21.9% - so about 1% different. Brighton is the same size and shape in both tiers so remains at 24% - so either way, 1-2% above the national average.</em></p>
<p>What’s changed? Well not very much (although I have used Brighton and Hove Albion colours in this one for fun - if they look a bit faded it’s because of the transparency!). The frequency distribution has changed on the right as the data are different, but:</p>
<ul>
<li><p>Brighton still does better than average for both its disadvantaged and non-disadvantaged pupils.</p></li>
<li><p>The second important thing to note is the size of the gap between the solid line and the dotted line for disadvantaged and non-disadvantaged pupils. It is smaller on the left than on the right. This is because the non-disadvantaged pupils are doing better than the disadvantaged pupils, relatively speaking. Although they are both performing above the national average.</p></li>
<li><p>The attainment gap is the gap between the two dotted lines and in this data, as Cllr Taylor correctly pointed out, it’s 33.5%.</p></li>
</ul>
<p>But how does attainment and the gap compare with the rest country?</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stain_removal_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>The graph above ranks every local authority in England by the performance of disadvantaged pupils, while also displaying, to the right, the relative performance of the non-disadvantaged pupils. Each pair of dots represents a single local authority.</li>
<li>And it’s clear to see that Brighton is in the top half - as we would know from the histogram above.</li>
<li>It’s also clear that the relationship between disadvantaged and non-disadvantaged pupils is not the same across the country. In some places, the gap is much smaller, in others larger, but no discernible pattern between the two at this stage.</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stain_removal_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>But what about the gap? Given there is so much noise, it would make sense to try and standardise the gap by either disadvantaged or non-disadvantaged attainment. If we look at the gap relative to advantaged attainment – i.e.&nbsp;how do Disadvantaged students do relative to the performance of the advantaged students in the same local authority – a reasonable way of standardising - we get the plot above.</p>
<p>What this shows is that in Brighton, the gap of 33.5% between disadvantaged (24%) and advantaged (57.5%) pupils is around 58% of that higher level of achievement in the city. Lower figures are better in this particular graph, so this gap is not in the top half of the English league table, but as the histogram above shows from the same data, this is because non-disadvantaged students are doing even better than the disadvantaged students, who are already doing better than average.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stain_removal_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>One final plot adds a regional perspective - again, this is just disadvantaged pupils, but it’s clear to see here the effect of London on the data. Brighton is in the top half of the country, a very large number of local authorities at the top of the distribution are in London.</li>
</ul>
</section>
</section>
<section id="gcse-grade-4-9-english-and-maths-2024" class="level3">
<h3 class="anchored" data-anchor-id="gcse-grade-4-9-english-and-maths-2024">GCSE Grade 4-9, English and Maths, 2024</h3>
<p>For completeness, I have also included the same analysis for the 4-9 grades in English and Maths. What you will notice is Brighton is still above average, but attainment of disadvantaged pupils is closer to the national average than for 9-5 grades. My overall observations about the gap do not change, however, it is worth asking the question why the attainment gap appears even better than this in the recent work carried out by the Education Policy Institute?</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stain_removal_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="stain_removal_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="the-education-policy-institute-work" class="level2">
<h2 class="anchored" data-anchor-id="the-education-policy-institute-work">The Education Policy Institute Work</h2>
<p>“The Education Policy Institute is an independent, impartial and evidence-based research institute that aims to promote high quality education outcomes for all children and young people, regardless of social background.” (from their website - <a href="https://epi.org.uk/our-mission-and-purpose/" class="uri">https://epi.org.uk/our-mission-and-purpose/</a>)</p>
<p>Every year they produce an annual report covering all aspects of educational inequalities in England and they are the gold-standard research organisation in this field.</p>
<p>In their most recent report, the gap between disadvantaged and non-disadvantaged pupils in Brighton and Hove at the secondary level compared to the rest of the country is considerably better than is suggested by the aggregate statistics published by the DfE - <a href="https://epi.org.uk/annual-report-2024-local-authority-gaps-2/" class="uri">https://epi.org.uk/annual-report-2024-local-authority-gaps-2/</a></p>
<p><img src="images/epi_brighton.png" class="img-fluid"></p>
<ul>
<li><p>In the interactive (on their site - visit via the link above) map above, we can see that, in the bottom left, rather than ranking near the bottom of the league table for education gap as the raw DfE data suggests, the EPI rank Brighton in the top third of all LEAs in England. Furthermore, it is one of the few LEAs that have shown improvement - a decline in disadvantage - since 2019 (bottom right).</p></li>
<li><p>So what’s going on? Well, in their methodology section, they explain some differences in how they measure disadvantage. <a href="https://epi.org.uk/annual-report-2024-disadvantage-2/" class="uri">https://epi.org.uk/annual-report-2024-disadvantage-2/</a> - what they outline in their “How do we measure the disadvantage gap” box, they state that (through using the <a href="https://www.find-npd-data.education.gov.uk/categories">National Pupil Database</a> (NPD) - which enables students to be tracked over time, rather than as a single-year snap-shot) they define disadvantage as any student who had received Free School Meals in the last 6-years. Therefore capturing a more comprehensive picture of disadvantage than a single year snapshot which might see some students go just over the very low threshold for free meals in one year.</p></li>
<li><p>Anything else? Yes, they also then order pupils and attainment by their rank for disadvantage and non-disadvantage and compare these ranks with each other - a method known as the ‘mean rank difference’. This technique is useful where you have a skewed distribution of values - which we have here with London way out-performing other LAs and LEAs in the country.</p></li>
<li><p>One more thing - as they have longitudinal pupil data from the NPD, they are able to express the attainment gap in months of learning - an intuitive measure which shows, on average, how many months earlier non-disadvantaged students attained the same level, relative to the disadvantaged students. The 2024 annual report local authority profiles also show that between KS2 and KS4, Brighton and Hove moves up the rankings considerably, giving even more weight to the observation that its secondary schools are performing well.</p></li>
<li><p>Given that the EPI are <strong><em>THE</em></strong> experts in the field of educational inequalities, rather than making errors with central tendency or arguing over aggregations of local authorities, it might be more useful for the Council to defer to this evidence from the EPI if there were ever any doubts that Brighton, relative to the rest of the Country and despite some acute problems, is actually doing an above average job of helping all of its students, already. Something that should be being built upon, rather than being torn down.</p></li>
</ul>
</section>
</section>
<section id="conclusions" class="level1">
<h1>Conclusions</h1>
<p>Having carried out this new analysis and looked back at what I observed in my last piece, it doesn’t change very much at all in relation to the original interpretation of similar data I posted – indeed it places some of the conclusions on even firmer foundations, with only one small change in interpretation relative to the gap.</p>
<p>Let’s take each one of my previous conclusions in turn:</p>
<ol type="1">
<li><strong>Old interpretation</strong> - Compared to the national average for England, Brighton’s attainment at GCSE for pupils on Free School Meals is lower, however, that national average is being pulled up considerably by London, which is performing between 6.5% and 15.1% better than the best-performing non-London region
<ul>
<li><strong>New interpretation</strong> - Compared to the national average across all Local Authorities in England, Brighton’s attainment at GCSE for disadvantaged pupils is <strong><em>HIGHER</em></strong>, and that national average is still being pulled up considerably by London, where most local authorities in the Capital are performing many percentage points higher than the best-performing non-London local authorities. If we take the 31 (In think City merges with Westminster) London Boroughs out of the equation - which all rank above Brighton and have 27 of the top 31 Local Authorities - Brighton would rank 76th out of 267 Local Authorities for disadvantaged attainment - put another way, this would be in the 3rd-best decile.</li>
</ul></li>
<li><strong>Old interpretation -</strong> If Brighton were one of these 33 regions, it would still be achieving better results for pupils on FSM than 2/3 of other places in England. If we take London out of the equation, it would appear in the top 5.
<ul>
<li><strong>New Interpretation</strong> – For disadvantaged Pupils, Brighton ranks 107 out of 298 local authorities (in the dataset) on this level of attainment – this means it is achieving better results for disadvantaged pupils than in around 2/3 of other local authorities in England. If we take London out of the equation (which has 27 of the top 31 local authorities on this measure), it would rank considerably higher.</li>
</ul></li>
<li><strong>Old interpretation -</strong> Rather than being ‘a stain on our city’, it should be regarded as a badge of pride that Brighton and Hove is able to achieve such good results for pupils in receipt of Free School Meals, relative to the rest of England.
<ul>
<li><strong>New interpretation</strong> - Rather than being ‘a stain on our city’, it should be regarded as a badge of pride that Brighton and Hove is able to achieve such good results for disadvantaged pupils, relative to the rest of England. It is performing above the national average already for both disadvantaged and non-disadvantaged students.</li>
</ul></li>
<li><strong>Old interpretation</strong> - If we look at the attainment gap between those who are on Free School Meals and those who aren’t as well, Brighton still performs far better than average, even with London in the equation. If Brighton were one of the regions above, it would be just outside the top 1/3.
<ul>
<li><strong>New Interpretation</strong> - If we look at the attainment gap between disadvantaged pupils and non-disadvantaged pupils, Brighton performs worse than average if we look at the raw gap, even with London in the equation. If we look at the gap relative to the non-disadvantaged pupils in the city, it would rank 130th worst out of 298 lower-tier local authorities – so in the bottom half. However, if we examine the national medians for disadvantaged and non-disadvantaged, Brighton is above average for both and it’s larger gap is only because non-disadvantaged students are doing even better than average, not because disadvantaged students are doing worse than expected.</li>
<li>Furthermore, research from the Education Policy Institute which uses more detailed longitudinal data to assign both disadvantage and measure progress gaps in months rather than grades and has a research design which is able to account for the biassing effects of London through using the mean rank difference, reveals that Brighton and Hove does even better on its education gap than the DfE data suggests. Indeed it is one of the few Local Authorities not only to have reduced its gap since 2019, but also shows a significant improvement between KS2 and KS4 - giving even more weight to the argument that its secondary schools are performing very well.</li>
</ul></li>
<li>My comments on this being a distraction for the real problem existing in Whitehawk – still remain valid. I said it before and will re-iterate here: Statistics are incredibly useful tools for developing an understanding of systems of interest, but aggregation - however it is done - while revealing overall trends and patterns, can mask important concentrated local issues.
<ul>
<li>It has become very clear to me while doing this analysis over the last few weeks that there is a real and very acute problem with educational disadvantage in some parts of the city - and particularly in the near-East of the city here Whitehawk is located and where students from that part of town have no choice at the moment other than to travel further than other students in the city to attend Longhill.</li>
<li>The city is clearly already doing well for some of its disadvantaged students (disadvantage while is has some pockets of spatial concentration in the city, is also something which occurs across neighbourhoods). But it is not doing well for all.</li>
<li>Casting the whole city as a failure - a community with a stain on it - is demonstrably unfair. The attainment gap owes more to high achievement for non-disadvantaged students than it does to under achievement for disadvantaged students, but that is not to say that we shouldn’t try to do better for those students and bring the bottom end up. I would argue that if bringing the top end down reduces that gap - through forcing more non-disadvantaged students to travel long distances to attend school and impacting their learning, while it could be touted as a statistical victory, it would be a detriment to the city.</li>
<li>I will re-iterate. From all of the evidence I have seen, it is not clear to me at all that playing with catchment area boundaries and reducing the intakes for schools already doing incredible things to close the educational gaps in the city, will lead to better outcomes for those who are most disadvantaged. The council should focus its attention, not on ill-conceived tinkering, but in producing a serious long-term plan and more immediate actionable ‘sticking plaster’ option to help bridge the gap for the most deprived in the city.</li>
</ul></li>
</ol>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb1" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Addendum - Educational Performance in Brighton"</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Professor Adam Dennett FRGS FAcSS, Professor of Urban Analytics, Bartlett Centre for Advanced Spatial Analysis, University College London - a.dennett@ucl.ac.uk - @adam_dennett"</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="an">published-title:</span><span class="co"> 26/10/24</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span><span class="co"> html</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> visual</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE, message=FALSE, warning=FALSE, error=FALSE, include=FALSE, results='hide'}</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="in">library(tidyr)</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="in">library(dplyr)</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="in">library(writexl)</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="in">library(tidyverse)</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="in">library(here)</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="in">library(janitor)</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="in">library(sf)</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="in">library(usethis)</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="in">library(tmap)</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="in">library(readxl)</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="in">library(r5r)</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="in">library(RColorBrewer)</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="in">library(accessibility)</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="in">library(data.table)</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="in">library(ggplot2)</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="in">library(interp)</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="in">library(h3jsr)</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="in">library(h3r)</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a><span class="in">library(osmextract)</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a><span class="in">library(stplanr)</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="in">library(od)</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span class="fu"># Introduction</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a><span class="sc">\*</span>*Note, I have made a few adjustments below to the original piece - adjusting for both Higher Tier Local Authorities. I have also included an additional section on the Education Policy Institute's Work, especially related to their methodology in their Annual Report - &lt;https://epi.org.uk/annual-report-2024-foreword-executive-summary/&gt; and why it should be given more weight than the raw DfE data - I have also, for completeness, provided graphs for **Percentage of pupils achieving grades 9-4 or above in English and mathematics GCSEs -** (in addition to 9-5).*</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>First of all, I'd like to say that I'm very grateful the Cllr Taylor and his team have been reading my analysis so carefully.</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>Yesterday I received an email from Jacob alerting me that he'd discovered an issue and was concerned that some of the messages from parents he'd been receiving were using incorrect facts. In particular, in relation the attainment gap I reported in <span class="co">[</span><span class="ot">this section</span><span class="co">](https://adamdennett.github.io/BH_Schools_2/schools_wk3.html#a-stain-on-our-city---really)</span> of my last piece.</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>Having looked at the point he raised and having carried out some new analysis with the data that the council had originally used to produce the graph below, I'm happy to report that almost all of observations I originally made still stand - and indeed are strengthened further by the new analysis, so I would like to thank them for that.</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>I would like to state that while I am very grateful for the link to some actual, real, verifiable data, it's disappointing that the first time the council were able to provide this was two days ***AFTER*** the end of the engagement exercise. This goes back to my original point in my very first piece of work - that the council need be more transparent and up-front with the data they use to make decisions and indeed charge their rhetoric. I'm glad that they have now provided this data, but it would have been much more useful to have had it at the start of the process.</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>One observation on the attainment gap has changed in the light of this new analysis - the gap in Brighton is larger relative to the rest of the country than originally estimated from the Council's original graph (which I assume will now be corrected). However the new data has allowed us to explore ***why*** this is. We can now see very clearly that both disadvantaged pupils *AND* non-disadvantaged pupils perform *ABOVE* the national average (median) in England (even including London).</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>I'll repeat that - In Brighton both ***disadvantaged*** pupils **AND** ***non-disadvantaged*** pupils perform ***ABOVE*** the national average (median) for GCSE grades 5-9 Attainment in Maths and English. Above.</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>The gap is because the non-disadvantaged pupils perform ***even better*** than average - meaning the gap is larger relative to other places with similar achievement for disadvantaged pupils.</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>Here is the original graph from the council:</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a><span class="al">![](images/stain.png)</span>{width="75%"}</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>Now the graph that Cllr Taylor was concerned about in my last analysis was this one:</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a><span class="al">![](images/stain2.png)</span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>Now, the issue Cllr Taylor alerted me to relates to the two green dots at the top of this chart.</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>Here's the point he raised: "You have compared Disadvantaged Attainment to ***All Pupil*** attainment, which is not how the Attainment Gap is calculated. Disadvantaged attainment has to be compared to Non-Disadvantaged Attainment (not all pupils)."</span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>A good point - and a correct one. An even better point had it have been raised when he put his own slides together, as you can see that this is exactly what the bar chart at the top is showing! I used their data. In drawing these green dots and time was short and data was sparse, I took the figures from the Council graph.</span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>But mistakes happen - the rest of my graph above (below the green dot) was actually using FSM regional data - not ideal, but the best I could lay my hands on at the time without a link to the original data. As I note above, Cllr Taylor was kind enough to send me the link to the <span class="co">[</span><span class="ot">original data</span><span class="co">](https://explore-education-statistics.service.gov.uk/find-statistics/key-stage-4-performance)</span>, and after a bit of digging around I found the correct file and have been able to correct the analysis.</span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a><span class="fu">## New Analysis - Are we still stained?</span></span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>Well, short answer is, no. We are no more stained than we were before. And much of the stain (the attainment gap in Brighton being worse than the attainment gap nationally) is actually an artefact of the council using the wrong 'average' - as I will explain below. Had they used the correct average - the median - a different picture emerges.</span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>There still appears to be some confusion online, which hopefully this bit of analysis will clear up once and for all.</span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Cllr Taylor - "Non-Disadvantaged attainment in Brighton and Hove was 57.5 in 2022-23, giving us an attainment gap of 33.5." - looking at the data, this observation is ***true***.</span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Cllr Taylor on Facebook - "Indeed - when compared to individual local authorities, our city has the 16th highest attainment gap of 152 local authorities - nearly in the top decile." This observation is true, when looking at just one of the possible attainment gap variables, - the ***Percentage of pupils achieving grades 5 or above in English and Mathematics GCSEs*** - however as is pointed out by the <span class="co">[</span><span class="ot">Educational Policy Institute in their annual report</span><span class="co">](https://epi.org.uk/annual-report-2024-methodology-2/)</span> - the average GCSE score across English and Maths in England, was 4.6. So in using this variable is effectively representing the - above-average attainment gap. However this is the 'raw' gap (i.e. a gap of 10-20% pass rate is the same as a gap from 30-40% pass rate - same gap, very different story).</span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a><span class="fu">## Data</span></span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a><span class="fu">### GCSE Grade 5-9, English and Maths, 2024</span></span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a>The file I have used in the analysis below is called ***2233_sl_lad_fsm_dis_data_revised.csv*** (downloaded from [here](https://explore-education-statistics.service.gov.uk/find-statistics/key-stage-4-performance)) – I am now almost certain that the data in Cllr Taylor's original graph comes from the field “pt_l2basics_95” - ***Percentage of pupils achieving grades 5 or above in English and Mathematics GCSEs.*** Even more specifically, the 50% for Brighton comes from cell W266 in that file and the 24% for disadvantaged pupils comes from Cell W262 in the same sheet.</span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>I pre-filtered that file above (I know, I'd normally do it all in R but today I did filter in excel first - slaps-wrists - but I really wanted to eyeball the data first to make sure mistakes did not creep in). Those two files, derived from *2233_sl_lad_fsm_dis_data_revised.csv* can be downloaded from <span class="co">[</span><span class="ot">here</span><span class="co">](https://www.dropbox.com/scl/fi/3g8wmdocqn0du3rikagte/dis_vs_non.csv?rlkey=6n8m416q41nsqpdndf2jebahz&amp;dl=0)</span> and <span class="co">[</span><span class="ot">here</span><span class="co">](https://www.dropbox.com/scl/fi/penjbjr196k4wb9gvplp8/all_vs_disadv.csv?rlkey=daxgv1op76z5yh3c42ygb4p3a&amp;dl=0)</span>. (note in the underlying code, I have now adjusted to read the original file in and filter and aggregate on the fly). OK, so we're all set.</span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a><span class="fu">## Analysis</span></span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a>We can plot that Brighton data. And even better than showing England and the South East, we can show all Local Authorities (upper and lower-tier now) in England. This gives us a much better way of comparing where Brighton sits relative to everywhere else. We can view this data below in a histogram:</span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE, message=FALSE, warning=FALSE, error=FALSE}</span></span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a><span class="in">#all_vs_disad &lt;- read_csv("https://www.dropbox.com/scl/fi/penjbjr196k4wb9gvplp8/all_vs_disadv.csv?rlkey=daxgv1op76z5yh3c42ygb4p3a&amp;raw=1")</span></span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a><span class="in">#dis_vs_non &lt;- read_csv("https://www.dropbox.com/scl/fi/3g8wmdocqn0du3rikagte/dis_vs_non.csv?rlkey=6n8m416q41nsqpdndf2jebahz&amp;raw=1")</span></span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a><span class="in">full_fsm_dis &lt;- read_csv("https://www.dropbox.com/scl/fi/kduzdg0q7cvb35s9o5nrt/2223_sl_lad_fsm_dis_data_revised.csv?rlkey=4kpfuncy0h40wp1qtzgid8vyj&amp;raw=1")</span></span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE, message=FALSE, warning=FALSE, error=FALSE}</span></span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a><span class="in">library(dplyr)</span></span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a><span class="in">library(ggplot2)</span></span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non &lt;- full_fsm_dis %&gt;% </span></span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(disadvantage %in% c("Disadvantaged", "Disadvantaged all other") &amp; </span></span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a><span class="in">         free_school_meals == "Total" &amp; </span></span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a><span class="in">         !is.na(lad_code))</span></span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a><span class="in">all_vs_disad &lt;- full_fsm_dis %&gt;% </span></span>
<span id="cb1-106"><a href="#cb1-106" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(disadvantage %in% c("Disadvantaged", "Total") &amp; </span></span>
<span id="cb1-107"><a href="#cb1-107" aria-hidden="true" tabindex="-1"></a><span class="in">         free_school_meals == "Total" &amp; </span></span>
<span id="cb1-108"><a href="#cb1-108" aria-hidden="true" tabindex="-1"></a><span class="in">         !is.na(lad_code))</span></span>
<span id="cb1-109"><a href="#cb1-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-110"><a href="#cb1-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-111"><a href="#cb1-111" aria-hidden="true" tabindex="-1"></a><span class="in"># Select the relevant columns and order the data</span></span>
<span id="cb1-112"><a href="#cb1-112" aria-hidden="true" tabindex="-1"></a><span class="in">all_vs_disad_ordered &lt;- all_vs_disad %&gt;%</span></span>
<span id="cb1-113"><a href="#cb1-113" aria-hidden="true" tabindex="-1"></a><span class="in">  select(lad_name, disadvantage, pt_l2basics_95) %&gt;%</span></span>
<span id="cb1-114"><a href="#cb1-114" aria-hidden="true" tabindex="-1"></a><span class="in">  arrange(lad_name)</span></span>
<span id="cb1-115"><a href="#cb1-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-116"><a href="#cb1-116" aria-hidden="true" tabindex="-1"></a><span class="in">all_vs_disad_filtered &lt;- all_vs_disad %&gt;%</span></span>
<span id="cb1-117"><a href="#cb1-117" aria-hidden="true" tabindex="-1"></a><span class="in">  select(lad_name, disadvantage, pt_l2basics_95) %&gt;% </span></span>
<span id="cb1-118"><a href="#cb1-118" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(lad_name = factor(lad_name, levels = unique(lad_name[order(pt_l2basics_95)])))</span></span>
<span id="cb1-119"><a href="#cb1-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-120"><a href="#cb1-120" aria-hidden="true" tabindex="-1"></a><span class="in"># Step 1: Pivot Wider</span></span>
<span id="cb1-121"><a href="#cb1-121" aria-hidden="true" tabindex="-1"></a><span class="in">all_vs_disad_wider &lt;- all_vs_disad_filtered %&gt;%</span></span>
<span id="cb1-122"><a href="#cb1-122" aria-hidden="true" tabindex="-1"></a><span class="in">  pivot_wider(names_from = disadvantage, values_from = pt_l2basics_95)</span></span>
<span id="cb1-123"><a href="#cb1-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-124"><a href="#cb1-124" aria-hidden="true" tabindex="-1"></a><span class="in"># Step 2: Calculate Gap</span></span>
<span id="cb1-125"><a href="#cb1-125" aria-hidden="true" tabindex="-1"></a><span class="in">all_vs_disad_wider &lt;- all_vs_disad_wider %&gt;%</span></span>
<span id="cb1-126"><a href="#cb1-126" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(Gap = Total - Disadvantaged) %&gt;% </span></span>
<span id="cb1-127"><a href="#cb1-127" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(Gap_vs_total = (Gap / Total)*100)</span></span>
<span id="cb1-128"><a href="#cb1-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-129"><a href="#cb1-129" aria-hidden="true" tabindex="-1"></a><span class="in"># Step 3: Pivot Longer</span></span>
<span id="cb1-130"><a href="#cb1-130" aria-hidden="true" tabindex="-1"></a><span class="in">all_vs_disad_longer &lt;- all_vs_disad_wider %&gt;%</span></span>
<span id="cb1-131"><a href="#cb1-131" aria-hidden="true" tabindex="-1"></a><span class="in">  pivot_longer(cols = c(Total, Disadvantaged, Gap, Gap_vs_total), names_to = "disadvantage", values_to = "pt_l2basics_95")</span></span>
<span id="cb1-132"><a href="#cb1-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-133"><a href="#cb1-133" aria-hidden="true" tabindex="-1"></a><span class="in"># Step 4: Adjust factor levels for lad_name based on 'Gap'</span></span>
<span id="cb1-134"><a href="#cb1-134" aria-hidden="true" tabindex="-1"></a><span class="in">all_vs_disad_longer &lt;- all_vs_disad_longer %&gt;%</span></span>
<span id="cb1-135"><a href="#cb1-135" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(lad_name = factor(lad_name, levels = all_vs_disad_wider %&gt;% </span></span>
<span id="cb1-136"><a href="#cb1-136" aria-hidden="true" tabindex="-1"></a><span class="in">                            arrange(Gap) %&gt;%</span></span>
<span id="cb1-137"><a href="#cb1-137" aria-hidden="true" tabindex="-1"></a><span class="in">                            pull(lad_name)))</span></span>
<span id="cb1-138"><a href="#cb1-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-139"><a href="#cb1-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-140"><a href="#cb1-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-141"><a href="#cb1-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-142"><a href="#cb1-142" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-143"><a href="#cb1-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-144"><a href="#cb1-144" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE, message=FALSE, warning=FALSE, error=FALSE}</span></span>
<span id="cb1-145"><a href="#cb1-145" aria-hidden="true" tabindex="-1"></a><span class="in">library(dplyr)</span></span>
<span id="cb1-146"><a href="#cb1-146" aria-hidden="true" tabindex="-1"></a><span class="in">library(ggplot2)</span></span>
<span id="cb1-147"><a href="#cb1-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-148"><a href="#cb1-148" aria-hidden="true" tabindex="-1"></a><span class="in"># Select the relevant columns and order the data</span></span>
<span id="cb1-149"><a href="#cb1-149" aria-hidden="true" tabindex="-1"></a><span class="in">all_vs_disad_ordered &lt;- all_vs_disad %&gt;%</span></span>
<span id="cb1-150"><a href="#cb1-150" aria-hidden="true" tabindex="-1"></a><span class="in">  select(lad_name, disadvantage, pt_l2basics_95) %&gt;%</span></span>
<span id="cb1-151"><a href="#cb1-151" aria-hidden="true" tabindex="-1"></a><span class="in">  arrange(pt_l2basics_95)</span></span>
<span id="cb1-152"><a href="#cb1-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-153"><a href="#cb1-153" aria-hidden="true" tabindex="-1"></a><span class="in"># Extract the value for Brighton and Hove for "Disadvantaged" and "Total"</span></span>
<span id="cb1-154"><a href="#cb1-154" aria-hidden="true" tabindex="-1"></a><span class="in">brighton_value_disadv &lt;- all_vs_disad_ordered %&gt;%</span></span>
<span id="cb1-155"><a href="#cb1-155" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(lad_name == "Brighton and Hove" &amp; disadvantage == "Disadvantaged") %&gt;%</span></span>
<span id="cb1-156"><a href="#cb1-156" aria-hidden="true" tabindex="-1"></a><span class="in">  pull(pt_l2basics_95)</span></span>
<span id="cb1-157"><a href="#cb1-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-158"><a href="#cb1-158" aria-hidden="true" tabindex="-1"></a><span class="in">brighton_value_total &lt;- all_vs_disad_ordered %&gt;%</span></span>
<span id="cb1-159"><a href="#cb1-159" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(lad_name == "Brighton and Hove" &amp; disadvantage == "Total") %&gt;%</span></span>
<span id="cb1-160"><a href="#cb1-160" aria-hidden="true" tabindex="-1"></a><span class="in">  pull(pt_l2basics_95)</span></span>
<span id="cb1-161"><a href="#cb1-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-162"><a href="#cb1-162" aria-hidden="true" tabindex="-1"></a><span class="in"># Calculate medians</span></span>
<span id="cb1-163"><a href="#cb1-163" aria-hidden="true" tabindex="-1"></a><span class="in">median_disadv &lt;- all_vs_disad_ordered %&gt;%</span></span>
<span id="cb1-164"><a href="#cb1-164" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(disadvantage == "Disadvantaged") %&gt;%</span></span>
<span id="cb1-165"><a href="#cb1-165" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(median = median(pt_l2basics_95)) %&gt;%</span></span>
<span id="cb1-166"><a href="#cb1-166" aria-hidden="true" tabindex="-1"></a><span class="in">  pull(median)</span></span>
<span id="cb1-167"><a href="#cb1-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-168"><a href="#cb1-168" aria-hidden="true" tabindex="-1"></a><span class="in">median_total &lt;- all_vs_disad_ordered %&gt;%</span></span>
<span id="cb1-169"><a href="#cb1-169" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(disadvantage == "Total") %&gt;%</span></span>
<span id="cb1-170"><a href="#cb1-170" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(median = median(pt_l2basics_95)) %&gt;%</span></span>
<span id="cb1-171"><a href="#cb1-171" aria-hidden="true" tabindex="-1"></a><span class="in">  pull(median)</span></span>
<span id="cb1-172"><a href="#cb1-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-173"><a href="#cb1-173" aria-hidden="true" tabindex="-1"></a><span class="in">mean_total &lt;- all_vs_disad_ordered %&gt;%</span></span>
<span id="cb1-174"><a href="#cb1-174" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(disadvantage == "Total") %&gt;%</span></span>
<span id="cb1-175"><a href="#cb1-175" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(mean = mean(pt_l2basics_95)) %&gt;%</span></span>
<span id="cb1-176"><a href="#cb1-176" aria-hidden="true" tabindex="-1"></a><span class="in">  pull(mean)</span></span>
<span id="cb1-177"><a href="#cb1-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-178"><a href="#cb1-178" aria-hidden="true" tabindex="-1"></a><span class="in">mean_disadv &lt;- all_vs_disad_ordered %&gt;%</span></span>
<span id="cb1-179"><a href="#cb1-179" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(disadvantage == "Disadvantaged") %&gt;%</span></span>
<span id="cb1-180"><a href="#cb1-180" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(mean = mean(pt_l2basics_95)) %&gt;%</span></span>
<span id="cb1-181"><a href="#cb1-181" aria-hidden="true" tabindex="-1"></a><span class="in">  pull(mean)</span></span>
<span id="cb1-182"><a href="#cb1-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-183"><a href="#cb1-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-184"><a href="#cb1-184" aria-hidden="true" tabindex="-1"></a><span class="in"># Create the overlaid histograms</span></span>
<span id="cb1-185"><a href="#cb1-185" aria-hidden="true" tabindex="-1"></a><span class="in">ggplot() +</span></span>
<span id="cb1-186"><a href="#cb1-186" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_histogram(data = filter(all_vs_disad_ordered, disadvantage == "Disadvantaged"), </span></span>
<span id="cb1-187"><a href="#cb1-187" aria-hidden="true" tabindex="-1"></a><span class="in">                 aes(x = pt_l2basics_95, fill = "Disadvantaged"), binwidth = 2, alpha = 0.5, position = "identity", color = "black") +</span></span>
<span id="cb1-188"><a href="#cb1-188" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_histogram(data = filter(all_vs_disad_ordered, disadvantage == "Total"), </span></span>
<span id="cb1-189"><a href="#cb1-189" aria-hidden="true" tabindex="-1"></a><span class="in">                 aes(x = pt_l2basics_95, fill = "Total"), binwidth = 2, alpha = 0.5, position = "identity", color = "black") +</span></span>
<span id="cb1-190"><a href="#cb1-190" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_vline(xintercept = brighton_value_disadv, color = "red", linetype = "dashed") +</span></span>
<span id="cb1-191"><a href="#cb1-191" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_vline(xintercept = brighton_value_total, color = "blue", linetype = "dashed") +</span></span>
<span id="cb1-192"><a href="#cb1-192" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_vline(xintercept = median_disadv, color = "orange", linetype = "solid", size = 1) +</span></span>
<span id="cb1-193"><a href="#cb1-193" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_vline(xintercept = median_total, color = "lightblue", linetype = "solid", size = 1) +</span></span>
<span id="cb1-194"><a href="#cb1-194" aria-hidden="true" tabindex="-1"></a><span class="in">  annotate("text", x = brighton_value_disadv, y = Inf, label = "Brighton and Hove (Disadvantaged)", color = "red", vjust = 2.5, angle = 90) +</span></span>
<span id="cb1-195"><a href="#cb1-195" aria-hidden="true" tabindex="-1"></a><span class="in">  annotate("text", x = brighton_value_total, y = Inf, label = "Brighton and Hove (Total)", color = "blue", vjust = 2.5, angle = 90) +</span></span>
<span id="cb1-196"><a href="#cb1-196" aria-hidden="true" tabindex="-1"></a><span class="in">  theme_minimal() +</span></span>
<span id="cb1-197"><a href="#cb1-197" aria-hidden="true" tabindex="-1"></a><span class="in">  labs(</span></span>
<span id="cb1-198"><a href="#cb1-198" aria-hidden="true" tabindex="-1"></a><span class="in">    title = "Percentage Achieving 9-5 grades in English and Maths, \nAll England Local Authorities",</span></span>
<span id="cb1-199"><a href="#cb1-199" aria-hidden="true" tabindex="-1"></a><span class="in">    x = "Percentage Achieving 9-5 grades in English and Maths",</span></span>
<span id="cb1-200"><a href="#cb1-200" aria-hidden="true" tabindex="-1"></a><span class="in">    y = "Frequency",</span></span>
<span id="cb1-201"><a href="#cb1-201" aria-hidden="true" tabindex="-1"></a><span class="in">    fill = "Disadvantage"</span></span>
<span id="cb1-202"><a href="#cb1-202" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb1-203"><a href="#cb1-203" aria-hidden="true" tabindex="-1"></a><span class="in">  scale_fill_manual(values = c("Disadvantaged" = "orange", "Total" = "lightblue"))</span></span>
<span id="cb1-204"><a href="#cb1-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-205"><a href="#cb1-205" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-206"><a href="#cb1-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-207"><a href="#cb1-207" aria-hidden="true" tabindex="-1"></a>Figure 1 - Disadvantaged Pupils vs Total</span>
<span id="cb1-208"><a href="#cb1-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-209"><a href="#cb1-209" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>First thing to say is I am aware that this is still the "***wrong***" data - the disadvantaged pupils in this graph are also included in the Total - so double counted. I will correct this in the next graph, but it's useful to have this here to see that it actually doesn't make a huge amount of difference. Still, it's worth doing things properly.</span>
<span id="cb1-210"><a href="#cb1-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-211"><a href="#cb1-211" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The second thing to note is The median values for disadvantaged pupils and advantaged pupils are shown by the solid lines, with the Brighton and Hove values in dashed lines.</span>
<span id="cb1-212"><a href="#cb1-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-213"><a href="#cb1-213" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>As an important aside, I have used the ***median*** value as my measure of 'average' here - this is actually quite important and something the Council overlooked in their original bar-chart shown at the top where it appears they have used the artithmetic ***mean***. Both are measures of central tendancy (mode being the other one that you might have heard of at school), but median is more appropriate where there there might be outliers (London, for example) and a a skewed distribution (more values at one end of the distribution as we can see in the disadvantaged historam above), and the reason why I have used it here. (There are various online guides as to when to use Median rather than mean, but most will probably start with <span class="co">[</span><span class="ot">wikipedia</span><span class="co">](https://en.wikipedia.org/wiki/Median)</span> - this BBC Bitesize guide is also genuinely great - <span class="ot">&lt;https://www.bbc.co.uk/bitesize/articles/z99jpbk&gt;</span>)</span>
<span id="cb1-214"><a href="#cb1-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-215"><a href="#cb1-215" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Relatedly, much of the original "stain" that was identified was because the figure of 25.4% for England was the arithmetic mean for the country (according to the data - <span class="sc">\[</span>40,074/157,963<span class="sc">\]\*</span>100). This is the average disadvantaged 9-5 Maths GCES Pass rate across all children in the county. However, if we took all of local pass rates for each local Authority - e.g. Brighton and Hove = 129/537 = 24% - and do the same for every other local authority, then median is the middle value in this set - and is 21.9%. Brighton is above average - as we already know by looking at the histogram above.</span>
<span id="cb1-216"><a href="#cb1-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-217"><a href="#cb1-217" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The third thing to note is this is a ***histogram***. Not a bar chart. Each bar represents a ***count*** of local authorities that fall into the range of the x-axis value. It's a nice way of seeing where Brighton sits relative to every other local authority in the country. If you look where Brighton is (on the blue side of the graph), it means there are another 22 local authorities (out of 298) whose total number of pupils achieving 9-5 grades in English and Maths is between 49-51%.</span>
<span id="cb1-218"><a href="#cb1-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-219"><a href="#cb1-219" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>As the dotted lines for Brighton fall to the right of the solid vertical lines, it means that Brighton is above the median for 9-5 Maths and English GSCE grades for both disadvantaged ***and*** advantaged pupils. Advantaged pupils do achieve a bit higher above the average than disadvantaged pupils.</span>
<span id="cb1-220"><a href="#cb1-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-221"><a href="#cb1-221" aria-hidden="true" tabindex="-1"></a><span class="fu">### Disadvantaged vs Non-Disadvantaged Pupils</span></span>
<span id="cb1-222"><a href="#cb1-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-223"><a href="#cb1-223" aria-hidden="true" tabindex="-1"></a>Below is a slightly different histogram created with slightly different rows of data from the same dataset. The disadvantaged data are exactly the same, but this time it is paired with data for non-disadvantaged pupils. If you add the two together, you get the total data from the previous graph. This is a better way of representing the data as it doesn't double count the disadvantaged pupils.</span>
<span id="cb1-224"><a href="#cb1-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-225"><a href="#cb1-225" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Minor Adjustment for Geography</span></span>
<span id="cb1-226"><a href="#cb1-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-227"><a href="#cb1-227" aria-hidden="true" tabindex="-1"></a>*There was a bit of a flurry of excitement on Facebook as originally in this piece I had used standard ("Lower Tier") local authorities (as this is geography the data comes in). My lack of understanding was mocked as I should have known (as everyone surely does!) - that what matters for education policy is "Upper Tier" local authorities - sometimes known as Local Education Authorities. Ok fine, now is not the time to get into distributions of academies and free schools which are outside of the control of local authorities, let's just see if upper tier makes any difference.*</span>
<span id="cb1-228"><a href="#cb1-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-229"><a href="#cb1-229" aria-hidden="true" tabindex="-1"></a>*I managed to source a [lookup-table from the ONS](https://geoportal.statistics.gov.uk/datasets/ec2949b8c037460bbc2891323927e931_0/explore) so have been able to aggregate the original data up to the Upper Tier level for comparison. My data now **exactly** matches that used by Cllr Taylor, so we're all good.*</span>
<span id="cb1-230"><a href="#cb1-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-231"><a href="#cb1-231" aria-hidden="true" tabindex="-1"></a>*As it's the same data, just a bit more aggregated, things haven't changed much. We get some statistical smoothing going on (see my last piece for [a bit of a guide on statistical smoothing](https://adamdennett.github.io/BH_Schools_2/schools_wk3.html#the-importance-of-boundaries-and-distributions-of-people-within-them)) which shifts the medians a little - about 1% for the disadvantaged group, but nothing which changes the interpretation. See below.*</span>
<span id="cb1-232"><a href="#cb1-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-233"><a href="#cb1-233" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE, message=FALSE, warning=FALSE, error=FALSE}</span></span>
<span id="cb1-234"><a href="#cb1-234" aria-hidden="true" tabindex="-1"></a><span class="in">library(dplyr)</span></span>
<span id="cb1-235"><a href="#cb1-235" aria-hidden="true" tabindex="-1"></a><span class="in">library(ggplot2)</span></span>
<span id="cb1-236"><a href="#cb1-236" aria-hidden="true" tabindex="-1"></a><span class="in">library(ggtext)</span></span>
<span id="cb1-237"><a href="#cb1-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-238"><a href="#cb1-238" aria-hidden="true" tabindex="-1"></a><span class="in"># Select the relevant columns and order the data</span></span>
<span id="cb1-239"><a href="#cb1-239" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_ordered &lt;- dis_vs_non %&gt;%</span></span>
<span id="cb1-240"><a href="#cb1-240" aria-hidden="true" tabindex="-1"></a><span class="in">  select(lad_code, lad_name, disadvantage, pt_l2basics_95, UTLA23CD, UTLA23NM) %&gt;%</span></span>
<span id="cb1-241"><a href="#cb1-241" aria-hidden="true" tabindex="-1"></a><span class="in">  arrange(pt_l2basics_95)</span></span>
<span id="cb1-242"><a href="#cb1-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-243"><a href="#cb1-243" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_filtered &lt;- dis_vs_non %&gt;%</span></span>
<span id="cb1-244"><a href="#cb1-244" aria-hidden="true" tabindex="-1"></a><span class="in">  select(lad_name, disadvantage, pt_l2basics_95) %&gt;%</span></span>
<span id="cb1-245"><a href="#cb1-245" aria-hidden="true" tabindex="-1"></a><span class="in">  arrange(lad_name)</span></span>
<span id="cb1-246"><a href="#cb1-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-247"><a href="#cb1-247" aria-hidden="true" tabindex="-1"></a><span class="in"># Create a new dataframe grouped by UTLA23CD and summarise columns</span></span>
<span id="cb1-248"><a href="#cb1-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-249"><a href="#cb1-249" aria-hidden="true" tabindex="-1"></a><span class="in"># Create a new dataframe grouped by UTLA23CD and disadvantage</span></span>
<span id="cb1-250"><a href="#cb1-250" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_utla &lt;- dis_vs_non %&gt;%</span></span>
<span id="cb1-251"><a href="#cb1-251" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(UTLA23CD, UTLA23NM, disadvantage) %&gt;%</span></span>
<span id="cb1-252"><a href="#cb1-252" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(across(starts_with("t_"), sum, na.rm = TRUE), </span></span>
<span id="cb1-253"><a href="#cb1-253" aria-hidden="true" tabindex="-1"></a><span class="in">            across(starts_with("avg_"), mean, na.rm = TRUE),</span></span>
<span id="cb1-254"><a href="#cb1-254" aria-hidden="true" tabindex="-1"></a><span class="in">            across(starts_with("pt_"), mean, na.rm = TRUE),</span></span>
<span id="cb1-255"><a href="#cb1-255" aria-hidden="true" tabindex="-1"></a><span class="in">            .groups = 'drop') # ensures ungrouping after summarising</span></span>
<span id="cb1-256"><a href="#cb1-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-257"><a href="#cb1-257" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_utla_filtered &lt;- dis_vs_non_utla %&gt;%</span></span>
<span id="cb1-258"><a href="#cb1-258" aria-hidden="true" tabindex="-1"></a><span class="in">  select(UTLA23NM, disadvantage, t_pupils, t_l2basics_95) %&gt;%</span></span>
<span id="cb1-259"><a href="#cb1-259" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(pt_l2basics_95 = (t_l2basics_95 / t_pupils)*100) %&gt;%</span></span>
<span id="cb1-260"><a href="#cb1-260" aria-hidden="true" tabindex="-1"></a><span class="in">  arrange(pt_l2basics_95)</span></span>
<span id="cb1-261"><a href="#cb1-261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-262"><a href="#cb1-262" aria-hidden="true" tabindex="-1"></a><span class="in"># Step 1: Pivot Wider</span></span>
<span id="cb1-263"><a href="#cb1-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-264"><a href="#cb1-264" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_utla_wider &lt;- dis_vs_non_utla_filtered %&gt;% </span></span>
<span id="cb1-265"><a href="#cb1-265" aria-hidden="true" tabindex="-1"></a><span class="in">  select(UTLA23NM, disadvantage, pt_l2basics_95) %&gt;%</span></span>
<span id="cb1-266"><a href="#cb1-266" aria-hidden="true" tabindex="-1"></a><span class="in">  pivot_wider(names_from = disadvantage, values_from = pt_l2basics_95)</span></span>
<span id="cb1-267"><a href="#cb1-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-268"><a href="#cb1-268" aria-hidden="true" tabindex="-1"></a><span class="in">#dis_vs_non_utla_wider &lt;- dis_vs_non_utla_filtered %&gt;%</span></span>
<span id="cb1-269"><a href="#cb1-269" aria-hidden="true" tabindex="-1"></a><span class="in">#  pivot_wider(names_from = disadvantage, values_from = pt_l2basics_95)</span></span>
<span id="cb1-270"><a href="#cb1-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-271"><a href="#cb1-271" aria-hidden="true" tabindex="-1"></a><span class="in"># Step 2: Calculate Gap</span></span>
<span id="cb1-272"><a href="#cb1-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-273"><a href="#cb1-273" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_utla_wider &lt;- dis_vs_non_utla_wider %&gt;%</span></span>
<span id="cb1-274"><a href="#cb1-274" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(Gap = `Disadvantaged all other` - Disadvantaged) %&gt;% </span></span>
<span id="cb1-275"><a href="#cb1-275" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(Gap_vs_total = (Gap / `Disadvantaged all other`)*100)</span></span>
<span id="cb1-276"><a href="#cb1-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-277"><a href="#cb1-277" aria-hidden="true" tabindex="-1"></a><span class="in"># Step 3: Pivot Longer</span></span>
<span id="cb1-278"><a href="#cb1-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-279"><a href="#cb1-279" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_utla_longer &lt;- dis_vs_non_utla_wider %&gt;%</span></span>
<span id="cb1-280"><a href="#cb1-280" aria-hidden="true" tabindex="-1"></a><span class="in">  pivot_longer(cols = c(`Disadvantaged all other`, Disadvantaged, Gap, Gap_vs_total), names_to = "disadvantage", values_to = "pt_l2basics_95")</span></span>
<span id="cb1-281"><a href="#cb1-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-282"><a href="#cb1-282" aria-hidden="true" tabindex="-1"></a><span class="in"># Step 4: Adjust factor levels for lad_name based on 'Gap'</span></span>
<span id="cb1-283"><a href="#cb1-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-284"><a href="#cb1-284" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_utla_longer &lt;- dis_vs_non_utla_longer %&gt;%</span></span>
<span id="cb1-285"><a href="#cb1-285" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(UTLA23NM = factor(UTLA23NM, levels = dis_vs_non_utla_wider %&gt;% </span></span>
<span id="cb1-286"><a href="#cb1-286" aria-hidden="true" tabindex="-1"></a><span class="in">                            arrange(Gap) %&gt;%</span></span>
<span id="cb1-287"><a href="#cb1-287" aria-hidden="true" tabindex="-1"></a><span class="in">                            pull(UTLA23NM))) %&gt;% </span></span>
<span id="cb1-288"><a href="#cb1-288" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(disadvantage %in% c("Disadvantaged", "Disadvantaged all other"))</span></span>
<span id="cb1-289"><a href="#cb1-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-290"><a href="#cb1-290" aria-hidden="true" tabindex="-1"></a><span class="in"># Filter out Brighton and Hove</span></span>
<span id="cb1-291"><a href="#cb1-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-292"><a href="#cb1-292" aria-hidden="true" tabindex="-1"></a><span class="in">brighton_utla_data &lt;- dis_vs_non_utla_longer %&gt;%</span></span>
<span id="cb1-293"><a href="#cb1-293" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(UTLA23NM == "Brighton and Hove")</span></span>
<span id="cb1-294"><a href="#cb1-294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-295"><a href="#cb1-295" aria-hidden="true" tabindex="-1"></a><span class="in"># create medians</span></span>
<span id="cb1-296"><a href="#cb1-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-297"><a href="#cb1-297" aria-hidden="true" tabindex="-1"></a><span class="in">median_disadv_utla &lt;- dis_vs_non_utla_longer %&gt;%</span></span>
<span id="cb1-298"><a href="#cb1-298" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(disadvantage == "Disadvantaged") %&gt;%</span></span>
<span id="cb1-299"><a href="#cb1-299" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(median = median(pt_l2basics_95)) %&gt;%</span></span>
<span id="cb1-300"><a href="#cb1-300" aria-hidden="true" tabindex="-1"></a><span class="in">  pull(median)</span></span>
<span id="cb1-301"><a href="#cb1-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-302"><a href="#cb1-302" aria-hidden="true" tabindex="-1"></a><span class="in">median_non_disadv_utla &lt;- dis_vs_non_utla_longer %&gt;%</span></span>
<span id="cb1-303"><a href="#cb1-303" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(disadvantage == "Disadvantaged all other") %&gt;%</span></span>
<span id="cb1-304"><a href="#cb1-304" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(median = median(pt_l2basics_95)) %&gt;%</span></span>
<span id="cb1-305"><a href="#cb1-305" aria-hidden="true" tabindex="-1"></a><span class="in">  pull(median)</span></span>
<span id="cb1-306"><a href="#cb1-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-307"><a href="#cb1-307" aria-hidden="true" tabindex="-1"></a><span class="in"># Extract the value for Brighton and Hove for "Disadvantaged" and "Total"</span></span>
<span id="cb1-308"><a href="#cb1-308" aria-hidden="true" tabindex="-1"></a><span class="in">brighton_value_disadv &lt;- dis_vs_non_utla %&gt;%</span></span>
<span id="cb1-309"><a href="#cb1-309" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(UTLA23NM == "Brighton and Hove" &amp; disadvantage == "Disadvantaged") %&gt;%</span></span>
<span id="cb1-310"><a href="#cb1-310" aria-hidden="true" tabindex="-1"></a><span class="in">  pull(pt_l2basics_95)</span></span>
<span id="cb1-311"><a href="#cb1-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-312"><a href="#cb1-312" aria-hidden="true" tabindex="-1"></a><span class="in">brighton_value_total &lt;- dis_vs_non_utla %&gt;%</span></span>
<span id="cb1-313"><a href="#cb1-313" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(UTLA23NM == "Brighton and Hove" &amp; disadvantage == "Disadvantaged all other") %&gt;%</span></span>
<span id="cb1-314"><a href="#cb1-314" aria-hidden="true" tabindex="-1"></a><span class="in">  pull(pt_l2basics_95)</span></span>
<span id="cb1-315"><a href="#cb1-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-316"><a href="#cb1-316" aria-hidden="true" tabindex="-1"></a><span class="in"># # Create the ggplot point graph</span></span>
<span id="cb1-317"><a href="#cb1-317" aria-hidden="true" tabindex="-1"></a><span class="in"># </span></span>
<span id="cb1-318"><a href="#cb1-318" aria-hidden="true" tabindex="-1"></a><span class="in"># ggplot(dis_vs_non_utla_longer, aes(x = pt_l2basics_95, y = UTLA23NM)) +</span></span>
<span id="cb1-319"><a href="#cb1-319" aria-hidden="true" tabindex="-1"></a><span class="in">#   geom_point(aes(color = disadvantage)) +</span></span>
<span id="cb1-320"><a href="#cb1-320" aria-hidden="true" tabindex="-1"></a><span class="in">#   theme_minimal() +</span></span>
<span id="cb1-321"><a href="#cb1-321" aria-hidden="true" tabindex="-1"></a><span class="in">#   labs(</span></span>
<span id="cb1-322"><a href="#cb1-322" aria-hidden="true" tabindex="-1"></a><span class="in">#     x = "Percentage Achieving 9-5 grades in English and Maths",</span></span>
<span id="cb1-323"><a href="#cb1-323" aria-hidden="true" tabindex="-1"></a><span class="in">#     y = "",</span></span>
<span id="cb1-324"><a href="#cb1-324" aria-hidden="true" tabindex="-1"></a><span class="in">#     title = "Attainment Gap, Disadvantaged as a Proportion of Non-Disadvantaged \n9-5 grades in English and Maths"</span></span>
<span id="cb1-325"><a href="#cb1-325" aria-hidden="true" tabindex="-1"></a><span class="in">#   ) +</span></span>
<span id="cb1-326"><a href="#cb1-326" aria-hidden="true" tabindex="-1"></a><span class="in">#   theme(axis.text.y = element_blank()) +</span></span>
<span id="cb1-327"><a href="#cb1-327" aria-hidden="true" tabindex="-1"></a><span class="in">#   geom_point(data = brighton_utla_data, aes(x = pt_l2basics_95, y = UTLA23NM), color = "black", size = 3) +</span></span>
<span id="cb1-328"><a href="#cb1-328" aria-hidden="true" tabindex="-1"></a><span class="in">#   scale_color_manual(values = c("Disadvantaged" = "orange", "Disadvantaged all other" = "lightblue"),</span></span>
<span id="cb1-329"><a href="#cb1-329" aria-hidden="true" tabindex="-1"></a><span class="in">#                      labels = c("Disadvantaged", "Non-Disadvantaged"))</span></span>
<span id="cb1-330"><a href="#cb1-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-331"><a href="#cb1-331" aria-hidden="true" tabindex="-1"></a><span class="in"># create histogram</span></span>
<span id="cb1-332"><a href="#cb1-332" aria-hidden="true" tabindex="-1"></a><span class="in">ggplot() +</span></span>
<span id="cb1-333"><a href="#cb1-333" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_histogram(data = filter(dis_vs_non_utla, disadvantage == "Disadvantaged"), </span></span>
<span id="cb1-334"><a href="#cb1-334" aria-hidden="true" tabindex="-1"></a><span class="in">                 aes(x = pt_l2basics_95, fill = "Disadvantaged"), binwidth = 2, alpha = 0.5, position = "identity", color = "black") +</span></span>
<span id="cb1-335"><a href="#cb1-335" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_histogram(data = filter(dis_vs_non_utla, disadvantage == "Disadvantaged all other"), </span></span>
<span id="cb1-336"><a href="#cb1-336" aria-hidden="true" tabindex="-1"></a><span class="in">                 aes(x = pt_l2basics_95, fill = "Non-Disadvantaged"), binwidth = 2, alpha = 0.5, position = "identity", color = "black") +</span></span>
<span id="cb1-337"><a href="#cb1-337" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_vline(xintercept = brighton_value_disadv, color = "#FFCD00", linetype = "dashed", size = 1.5) +</span></span>
<span id="cb1-338"><a href="#cb1-338" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_vline(xintercept = brighton_value_total, color = "#0057B8", linetype = "dashed", size = 1.5) +</span></span>
<span id="cb1-339"><a href="#cb1-339" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_vline(xintercept = median_disadv_utla, color = "#FFCD00", linetype = "solid", size = 1.5) +</span></span>
<span id="cb1-340"><a href="#cb1-340" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_vline(xintercept = median_non_disadv_utla, color = "#0057B8", linetype = "solid", size = 1.5) +</span></span>
<span id="cb1-341"><a href="#cb1-341" aria-hidden="true" tabindex="-1"></a><span class="in">  annotate("text", x = brighton_value_disadv, y = Inf, label = "Brighton and Hove (Disadvantaged)", color = "#FFCD00", vjust = 1.5, angle = 90) +</span></span>
<span id="cb1-342"><a href="#cb1-342" aria-hidden="true" tabindex="-1"></a><span class="in">  annotate("text", x = brighton_value_total, y = Inf, label = "Brighton and Hove (Non-Disadvantaged)", color = "#0057B8", vjust = 1.5, angle = 90) +</span></span>
<span id="cb1-343"><a href="#cb1-343" aria-hidden="true" tabindex="-1"></a><span class="in">  theme_minimal() +</span></span>
<span id="cb1-344"><a href="#cb1-344" aria-hidden="true" tabindex="-1"></a><span class="in">  labs(</span></span>
<span id="cb1-345"><a href="#cb1-345" aria-hidden="true" tabindex="-1"></a><span class="in">    title = "Percentage Pupils Achieving 9-5 grades in English and Maths,  \nAll England Local *Education* Authorities (Upper Tier)",</span></span>
<span id="cb1-346"><a href="#cb1-346" aria-hidden="true" tabindex="-1"></a><span class="in">    x = "Percentage Achieving 9-5 grades in English and Maths",</span></span>
<span id="cb1-347"><a href="#cb1-347" aria-hidden="true" tabindex="-1"></a><span class="in">    y = "Frequency",</span></span>
<span id="cb1-348"><a href="#cb1-348" aria-hidden="true" tabindex="-1"></a><span class="in">    fill = "Disadvantage"</span></span>
<span id="cb1-349"><a href="#cb1-349" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb1-350"><a href="#cb1-350" aria-hidden="true" tabindex="-1"></a><span class="in">  theme(title = ggtext::element_markdown()) +</span></span>
<span id="cb1-351"><a href="#cb1-351" aria-hidden="true" tabindex="-1"></a><span class="in">  scale_fill_manual(values = c("Disadvantaged" = "#FFCD00", "Non-Disadvantaged" = "#0057B8")) </span></span>
<span id="cb1-352"><a href="#cb1-352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-353"><a href="#cb1-353" aria-hidden="true" tabindex="-1"></a><span class="in">#+ ggsave(here("images", "attainmentgap_95.png"))</span></span>
<span id="cb1-354"><a href="#cb1-354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-355"><a href="#cb1-355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-356"><a href="#cb1-356" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-357"><a href="#cb1-357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-358"><a href="#cb1-358" aria-hidden="true" tabindex="-1"></a>Figure 2a - Achievement, disadvantaged and non-disadvantaged, 153 "Upper Tier" Local Authorities (Local Education Authorities - LEAs)</span>
<span id="cb1-359"><a href="#cb1-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-360"><a href="#cb1-360" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE, message=FALSE, warning=FALSE, error=FALSE}</span></span>
<span id="cb1-361"><a href="#cb1-361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-362"><a href="#cb1-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-363"><a href="#cb1-363" aria-hidden="true" tabindex="-1"></a><span class="in"># Step 1: Pivot Wider</span></span>
<span id="cb1-364"><a href="#cb1-364" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_wider &lt;- dis_vs_non_filtered %&gt;%</span></span>
<span id="cb1-365"><a href="#cb1-365" aria-hidden="true" tabindex="-1"></a><span class="in">  pivot_wider(names_from = disadvantage, values_from = pt_l2basics_95)</span></span>
<span id="cb1-366"><a href="#cb1-366" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-367"><a href="#cb1-367" aria-hidden="true" tabindex="-1"></a><span class="in"># Step 2: Calculate Gap</span></span>
<span id="cb1-368"><a href="#cb1-368" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_wider &lt;- dis_vs_non_wider %&gt;%</span></span>
<span id="cb1-369"><a href="#cb1-369" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(Gap = `Disadvantaged all other` - Disadvantaged) %&gt;% </span></span>
<span id="cb1-370"><a href="#cb1-370" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(Gap_vs_total = (Gap / `Disadvantaged all other`)*100)</span></span>
<span id="cb1-371"><a href="#cb1-371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-372"><a href="#cb1-372" aria-hidden="true" tabindex="-1"></a><span class="in"># Step 3: Pivot Longer</span></span>
<span id="cb1-373"><a href="#cb1-373" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_longer &lt;- dis_vs_non_wider %&gt;%</span></span>
<span id="cb1-374"><a href="#cb1-374" aria-hidden="true" tabindex="-1"></a><span class="in">  pivot_longer(cols = c(`Disadvantaged all other`, Disadvantaged, Gap, Gap_vs_total), names_to = "disadvantage", values_to = "pt_l2basics_95")</span></span>
<span id="cb1-375"><a href="#cb1-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-376"><a href="#cb1-376" aria-hidden="true" tabindex="-1"></a><span class="in"># Step 4: Adjust factor levels for lad_name based on 'Gap'</span></span>
<span id="cb1-377"><a href="#cb1-377" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_longer &lt;- dis_vs_non_longer %&gt;%</span></span>
<span id="cb1-378"><a href="#cb1-378" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(lad_name = factor(lad_name, levels = dis_vs_non_wider %&gt;% </span></span>
<span id="cb1-379"><a href="#cb1-379" aria-hidden="true" tabindex="-1"></a><span class="in">                            arrange(Gap) %&gt;%</span></span>
<span id="cb1-380"><a href="#cb1-380" aria-hidden="true" tabindex="-1"></a><span class="in">                            pull(lad_name)))</span></span>
<span id="cb1-381"><a href="#cb1-381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-382"><a href="#cb1-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-383"><a href="#cb1-383" aria-hidden="true" tabindex="-1"></a><span class="in"># Extract the value for Brighton and Hove for "Disadvantaged" and "Total"</span></span>
<span id="cb1-384"><a href="#cb1-384" aria-hidden="true" tabindex="-1"></a><span class="in">brighton_value_disadv &lt;- dis_vs_non_ordered %&gt;%</span></span>
<span id="cb1-385"><a href="#cb1-385" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(lad_name == "Brighton and Hove" &amp; disadvantage == "Disadvantaged") %&gt;%</span></span>
<span id="cb1-386"><a href="#cb1-386" aria-hidden="true" tabindex="-1"></a><span class="in">  pull(pt_l2basics_95)</span></span>
<span id="cb1-387"><a href="#cb1-387" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-388"><a href="#cb1-388" aria-hidden="true" tabindex="-1"></a><span class="in">brighton_value_total &lt;- dis_vs_non_ordered %&gt;%</span></span>
<span id="cb1-389"><a href="#cb1-389" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(lad_name == "Brighton and Hove" &amp; disadvantage == "Disadvantaged all other") %&gt;%</span></span>
<span id="cb1-390"><a href="#cb1-390" aria-hidden="true" tabindex="-1"></a><span class="in">  pull(pt_l2basics_95)</span></span>
<span id="cb1-391"><a href="#cb1-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-392"><a href="#cb1-392" aria-hidden="true" tabindex="-1"></a><span class="in"># Calculate medians</span></span>
<span id="cb1-393"><a href="#cb1-393" aria-hidden="true" tabindex="-1"></a><span class="in">median_disadv &lt;- dis_vs_non_ordered %&gt;%</span></span>
<span id="cb1-394"><a href="#cb1-394" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(disadvantage == "Disadvantaged") %&gt;%</span></span>
<span id="cb1-395"><a href="#cb1-395" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(median = median(pt_l2basics_95)) %&gt;%</span></span>
<span id="cb1-396"><a href="#cb1-396" aria-hidden="true" tabindex="-1"></a><span class="in">  pull(median)</span></span>
<span id="cb1-397"><a href="#cb1-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-398"><a href="#cb1-398" aria-hidden="true" tabindex="-1"></a><span class="in">median_total &lt;- dis_vs_non_ordered %&gt;%</span></span>
<span id="cb1-399"><a href="#cb1-399" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(disadvantage == "Disadvantaged all other") %&gt;%</span></span>
<span id="cb1-400"><a href="#cb1-400" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(median = median(pt_l2basics_95)) %&gt;%</span></span>
<span id="cb1-401"><a href="#cb1-401" aria-hidden="true" tabindex="-1"></a><span class="in">  pull(median)</span></span>
<span id="cb1-402"><a href="#cb1-402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-403"><a href="#cb1-403" aria-hidden="true" tabindex="-1"></a><span class="in"># Create the overlaid histograms with median lines</span></span>
<span id="cb1-404"><a href="#cb1-404" aria-hidden="true" tabindex="-1"></a><span class="in">ggplot() +</span></span>
<span id="cb1-405"><a href="#cb1-405" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_histogram(data = filter(dis_vs_non_ordered, disadvantage == "Disadvantaged"), </span></span>
<span id="cb1-406"><a href="#cb1-406" aria-hidden="true" tabindex="-1"></a><span class="in">                 aes(x = pt_l2basics_95, fill = "Disadvantaged"), binwidth = 2, alpha = 0.5, position = "identity", color = "black") +</span></span>
<span id="cb1-407"><a href="#cb1-407" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_histogram(data = filter(dis_vs_non_ordered, disadvantage == "Disadvantaged all other"), </span></span>
<span id="cb1-408"><a href="#cb1-408" aria-hidden="true" tabindex="-1"></a><span class="in">                 aes(x = pt_l2basics_95, fill = "Non-Disadvantaged"), binwidth = 2, alpha = 0.5, position = "identity", color = "black") +</span></span>
<span id="cb1-409"><a href="#cb1-409" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_vline(xintercept = brighton_value_disadv, color = "#FFCD00", linetype = "dashed", size = 1.5) +</span></span>
<span id="cb1-410"><a href="#cb1-410" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_vline(xintercept = brighton_value_total, color = "#0057B8", linetype = "dashed", size = 1.5) +</span></span>
<span id="cb1-411"><a href="#cb1-411" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_vline(xintercept = median_disadv, color = "#FFCD00", linetype = "solid", size = 1.5) +</span></span>
<span id="cb1-412"><a href="#cb1-412" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_vline(xintercept = median_total, color = "#0057B8", linetype = "solid", size = 1.5) +</span></span>
<span id="cb1-413"><a href="#cb1-413" aria-hidden="true" tabindex="-1"></a><span class="in">  annotate("text", x = brighton_value_disadv, y = Inf, label = "Brighton and Hove (Disadvantaged)", color = "#FFCD00", vjust = 1.5, angle = 90) +</span></span>
<span id="cb1-414"><a href="#cb1-414" aria-hidden="true" tabindex="-1"></a><span class="in">  annotate("text", x = brighton_value_total, y = Inf, label = "Brighton and Hove (Non-Disadvantaged)", color = "#0057B8", vjust = 1.5, angle = 90) +</span></span>
<span id="cb1-415"><a href="#cb1-415" aria-hidden="true" tabindex="-1"></a><span class="in">  theme_minimal() +</span></span>
<span id="cb1-416"><a href="#cb1-416" aria-hidden="true" tabindex="-1"></a><span class="in">  labs(</span></span>
<span id="cb1-417"><a href="#cb1-417" aria-hidden="true" tabindex="-1"></a><span class="in">    title = "Percentage Achieving 9-5 grades in English and Maths, \nAll England Local Authorities (Lower Tier)",</span></span>
<span id="cb1-418"><a href="#cb1-418" aria-hidden="true" tabindex="-1"></a><span class="in">    x = "Percentage Achieving 9-5 grades in English and Maths",</span></span>
<span id="cb1-419"><a href="#cb1-419" aria-hidden="true" tabindex="-1"></a><span class="in">    y = "Frequency",</span></span>
<span id="cb1-420"><a href="#cb1-420" aria-hidden="true" tabindex="-1"></a><span class="in">    fill = "Disadvantage"</span></span>
<span id="cb1-421"><a href="#cb1-421" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb1-422"><a href="#cb1-422" aria-hidden="true" tabindex="-1"></a><span class="in">  scale_fill_manual(values = c("Disadvantaged" = "#FFCD00", "Non-Disadvantaged" = "#0057B8"))</span></span>
<span id="cb1-423"><a href="#cb1-423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-424"><a href="#cb1-424" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-425"><a href="#cb1-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-426"><a href="#cb1-426" aria-hidden="true" tabindex="-1"></a>Figure 2b - Achievement, disadvantaged and non-disadvantaged, 153 "Upper Tier" Local Authorities (Local Education Authorities - LEAs)</span>
<span id="cb1-427"><a href="#cb1-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-428"><a href="#cb1-428" aria-hidden="true" tabindex="-1"></a>*Note - text below refers to the bottom of these two histograms - the original lower-tier data. When aggregating to 'upper-tier' the median for disadvantaged students is 22.97%. At lower tier, the median is 21.9% - so about 1% different. Brighton is the same size and shape in both tiers so remains at 24% - so either way, 1-2% above the national average.*</span>
<span id="cb1-429"><a href="#cb1-429" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-430"><a href="#cb1-430" aria-hidden="true" tabindex="-1"></a>What's changed? Well not very much (although I have used Brighton and Hove Albion colours in this one for fun - if they look a bit faded it's because of the transparency!). The frequency distribution has changed on the right as the data are different, but:</span>
<span id="cb1-431"><a href="#cb1-431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-432"><a href="#cb1-432" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Brighton still does better than average for both its disadvantaged and non-disadvantaged pupils.</span>
<span id="cb1-433"><a href="#cb1-433" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-434"><a href="#cb1-434" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The second important thing to note is the size of the gap between the solid line and the dotted line for disadvantaged and non-disadvantaged pupils. It is smaller on the left than on the right. This is because the non-disadvantaged pupils are doing better than the disadvantaged pupils, relatively speaking. Although they are both performing above the national average.</span>
<span id="cb1-435"><a href="#cb1-435" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-436"><a href="#cb1-436" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The attainment gap is the gap between the two dotted lines and in this data, as Cllr Taylor correctly pointed out, it's 33.5%.</span>
<span id="cb1-437"><a href="#cb1-437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-438"><a href="#cb1-438" aria-hidden="true" tabindex="-1"></a>But how does attainment and the gap compare with the rest country?</span>
<span id="cb1-439"><a href="#cb1-439" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-440"><a href="#cb1-440" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE, message=FALSE, warning=FALSE, error=FALSE}</span></span>
<span id="cb1-441"><a href="#cb1-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-442"><a href="#cb1-442" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-443"><a href="#cb1-443" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_ordered &lt;- dis_vs_non %&gt;%</span></span>
<span id="cb1-444"><a href="#cb1-444" aria-hidden="true" tabindex="-1"></a><span class="in">  select(lad_name, disadvantage, pt_l2basics_95, region_name) %&gt;%</span></span>
<span id="cb1-445"><a href="#cb1-445" aria-hidden="true" tabindex="-1"></a><span class="in">  arrange(pt_l2basics_95)</span></span>
<span id="cb1-446"><a href="#cb1-446" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-447"><a href="#cb1-447" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_filtered &lt;- dis_vs_non %&gt;%</span></span>
<span id="cb1-448"><a href="#cb1-448" aria-hidden="true" tabindex="-1"></a><span class="in">  select(lad_name, disadvantage, pt_l2basics_95, region_name) %&gt;% </span></span>
<span id="cb1-449"><a href="#cb1-449" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(lad_name = factor(lad_name, levels = unique(lad_name[order(pt_l2basics_95)])))</span></span>
<span id="cb1-450"><a href="#cb1-450" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-451"><a href="#cb1-451" aria-hidden="true" tabindex="-1"></a><span class="in"># Step 1: Pivot Wider</span></span>
<span id="cb1-452"><a href="#cb1-452" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_wider &lt;- dis_vs_non_filtered %&gt;%</span></span>
<span id="cb1-453"><a href="#cb1-453" aria-hidden="true" tabindex="-1"></a><span class="in">  pivot_wider(names_from = disadvantage, values_from = pt_l2basics_95)</span></span>
<span id="cb1-454"><a href="#cb1-454" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-455"><a href="#cb1-455" aria-hidden="true" tabindex="-1"></a><span class="in"># Step 2: Calculate Gap</span></span>
<span id="cb1-456"><a href="#cb1-456" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_wider &lt;- dis_vs_non_wider %&gt;%</span></span>
<span id="cb1-457"><a href="#cb1-457" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(Gap = `Disadvantaged all other` - Disadvantaged) %&gt;% </span></span>
<span id="cb1-458"><a href="#cb1-458" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(Gap_vs_non_dis = (Gap / `Disadvantaged all other`)*100)</span></span>
<span id="cb1-459"><a href="#cb1-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-460"><a href="#cb1-460" aria-hidden="true" tabindex="-1"></a><span class="in"># Step 3: Pivot Longer</span></span>
<span id="cb1-461"><a href="#cb1-461" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_longer &lt;- dis_vs_non_wider %&gt;%</span></span>
<span id="cb1-462"><a href="#cb1-462" aria-hidden="true" tabindex="-1"></a><span class="in">  pivot_longer(cols = c(`Disadvantaged all other`, Disadvantaged, Gap, Gap_vs_non_dis), names_to = "disadvantage", values_to = "pt_l2basics_95")</span></span>
<span id="cb1-463"><a href="#cb1-463" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-464"><a href="#cb1-464" aria-hidden="true" tabindex="-1"></a><span class="in"># Step 4: Adjust factor levels for lad_name based on 'Gap'</span></span>
<span id="cb1-465"><a href="#cb1-465" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_longer &lt;- dis_vs_non_longer %&gt;%</span></span>
<span id="cb1-466"><a href="#cb1-466" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(lad_name = factor(lad_name, levels = dis_vs_non_wider %&gt;% </span></span>
<span id="cb1-467"><a href="#cb1-467" aria-hidden="true" tabindex="-1"></a><span class="in">                            arrange(Disadvantaged) %&gt;%</span></span>
<span id="cb1-468"><a href="#cb1-468" aria-hidden="true" tabindex="-1"></a><span class="in">                            pull(lad_name))) %&gt;% </span></span>
<span id="cb1-469"><a href="#cb1-469" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(disadvantage %in% c("Disadvantaged", "Disadvantaged all other"))</span></span>
<span id="cb1-470"><a href="#cb1-470" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-471"><a href="#cb1-471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-472"><a href="#cb1-472" aria-hidden="true" tabindex="-1"></a><span class="in"># Filter out Brighton and Hove</span></span>
<span id="cb1-473"><a href="#cb1-473" aria-hidden="true" tabindex="-1"></a><span class="in">brighton_data &lt;- dis_vs_non_longer %&gt;%</span></span>
<span id="cb1-474"><a href="#cb1-474" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(lad_name == "Brighton and Hove")</span></span>
<span id="cb1-475"><a href="#cb1-475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-476"><a href="#cb1-476" aria-hidden="true" tabindex="-1"></a><span class="in"># Create the ggplot point graph</span></span>
<span id="cb1-477"><a href="#cb1-477" aria-hidden="true" tabindex="-1"></a><span class="in">ggplot(dis_vs_non_longer, aes(x = pt_l2basics_95, y = lad_name)) +</span></span>
<span id="cb1-478"><a href="#cb1-478" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_point(aes(color = disadvantage)) +</span></span>
<span id="cb1-479"><a href="#cb1-479" aria-hidden="true" tabindex="-1"></a><span class="in">  theme_minimal() +</span></span>
<span id="cb1-480"><a href="#cb1-480" aria-hidden="true" tabindex="-1"></a><span class="in">  labs(</span></span>
<span id="cb1-481"><a href="#cb1-481" aria-hidden="true" tabindex="-1"></a><span class="in">    x = "Percentage Achieving 9-5 grades in English and Maths",</span></span>
<span id="cb1-482"><a href="#cb1-482" aria-hidden="true" tabindex="-1"></a><span class="in">    y = "",</span></span>
<span id="cb1-483"><a href="#cb1-483" aria-hidden="true" tabindex="-1"></a><span class="in">    title = "Attainment Gap, Disadvantaged as a Proportion of Non-Disadvantaged \n9-5 grades in English and Maths"</span></span>
<span id="cb1-484"><a href="#cb1-484" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb1-485"><a href="#cb1-485" aria-hidden="true" tabindex="-1"></a><span class="in">  theme(axis.text.y = element_blank()) +</span></span>
<span id="cb1-486"><a href="#cb1-486" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_point(data = brighton_data, aes(x = pt_l2basics_95, y = lad_name), color = "black", size = 3) +</span></span>
<span id="cb1-487"><a href="#cb1-487" aria-hidden="true" tabindex="-1"></a><span class="in">  scale_color_manual(values = c("Disadvantaged" = "#FFCD00", "Disadvantaged all other" = "#0057B8"),</span></span>
<span id="cb1-488"><a href="#cb1-488" aria-hidden="true" tabindex="-1"></a><span class="in">                     labels = c("Disadvantaged", "Non-Disadvantaged"))</span></span>
<span id="cb1-489"><a href="#cb1-489" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-490"><a href="#cb1-490" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-491"><a href="#cb1-491" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-492"><a href="#cb1-492" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The graph above ranks every local authority in England by the performance of disadvantaged pupils, while also displaying, to the right, the relative performance of the non-disadvantaged pupils. Each pair of dots represents a single local authority.</span>
<span id="cb1-493"><a href="#cb1-493" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>And it's clear to see that Brighton is in the top half - as we would know from the histogram above.</span>
<span id="cb1-494"><a href="#cb1-494" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>It's also clear that the relationship between disadvantaged and non-disadvantaged pupils is not the same across the country. In some places, the gap is much smaller, in others larger, but no discernible pattern between the two at this stage.</span>
<span id="cb1-495"><a href="#cb1-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-496"><a href="#cb1-496" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE, message=FALSE, warning=FALSE, error=FALSE}</span></span>
<span id="cb1-497"><a href="#cb1-497" aria-hidden="true" tabindex="-1"></a><span class="in">library(dplyr)</span></span>
<span id="cb1-498"><a href="#cb1-498" aria-hidden="true" tabindex="-1"></a><span class="in">library(ggplot2)</span></span>
<span id="cb1-499"><a href="#cb1-499" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-500"><a href="#cb1-500" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_ordered &lt;- dis_vs_non %&gt;%</span></span>
<span id="cb1-501"><a href="#cb1-501" aria-hidden="true" tabindex="-1"></a><span class="in">  select(lad_name, disadvantage, pt_l2basics_95, region_name) %&gt;%</span></span>
<span id="cb1-502"><a href="#cb1-502" aria-hidden="true" tabindex="-1"></a><span class="in">  arrange(pt_l2basics_95)</span></span>
<span id="cb1-503"><a href="#cb1-503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-504"><a href="#cb1-504" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_filtered &lt;- dis_vs_non %&gt;%</span></span>
<span id="cb1-505"><a href="#cb1-505" aria-hidden="true" tabindex="-1"></a><span class="in">  select(lad_name, disadvantage, pt_l2basics_95, region_name) %&gt;% </span></span>
<span id="cb1-506"><a href="#cb1-506" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(lad_name = factor(lad_name, levels = unique(lad_name[order(pt_l2basics_95)])))</span></span>
<span id="cb1-507"><a href="#cb1-507" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-508"><a href="#cb1-508" aria-hidden="true" tabindex="-1"></a><span class="in">  # Step 1: Pivot Wider</span></span>
<span id="cb1-509"><a href="#cb1-509" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_wider &lt;- dis_vs_non_filtered %&gt;%</span></span>
<span id="cb1-510"><a href="#cb1-510" aria-hidden="true" tabindex="-1"></a><span class="in">  pivot_wider(names_from = disadvantage, values_from = pt_l2basics_95)</span></span>
<span id="cb1-511"><a href="#cb1-511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-512"><a href="#cb1-512" aria-hidden="true" tabindex="-1"></a><span class="in"># Step 2: Calculate Gap</span></span>
<span id="cb1-513"><a href="#cb1-513" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_wider &lt;- dis_vs_non_wider %&gt;%</span></span>
<span id="cb1-514"><a href="#cb1-514" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(Gap = `Disadvantaged all other` - Disadvantaged) %&gt;% </span></span>
<span id="cb1-515"><a href="#cb1-515" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(Gap_vs_non_dis = (Gap / `Disadvantaged all other`)*100)</span></span>
<span id="cb1-516"><a href="#cb1-516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-517"><a href="#cb1-517" aria-hidden="true" tabindex="-1"></a><span class="in"># Step 3: Pivot Longer</span></span>
<span id="cb1-518"><a href="#cb1-518" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_longer &lt;- dis_vs_non_wider %&gt;%</span></span>
<span id="cb1-519"><a href="#cb1-519" aria-hidden="true" tabindex="-1"></a><span class="in">  pivot_longer(cols = c(`Disadvantaged all other`, Disadvantaged, Gap, Gap_vs_non_dis), names_to = "disadvantage", values_to = "pt_l2basics_95")</span></span>
<span id="cb1-520"><a href="#cb1-520" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-521"><a href="#cb1-521" aria-hidden="true" tabindex="-1"></a><span class="in"># Step 4: Adjust factor levels for lad_name based on 'Gap'</span></span>
<span id="cb1-522"><a href="#cb1-522" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_longer &lt;- dis_vs_non_longer %&gt;%</span></span>
<span id="cb1-523"><a href="#cb1-523" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(lad_name = factor(lad_name, levels = dis_vs_non_wider %&gt;% </span></span>
<span id="cb1-524"><a href="#cb1-524" aria-hidden="true" tabindex="-1"></a><span class="in">                            arrange(Gap_vs_non_dis) %&gt;%</span></span>
<span id="cb1-525"><a href="#cb1-525" aria-hidden="true" tabindex="-1"></a><span class="in">                            pull(lad_name))) %&gt;% </span></span>
<span id="cb1-526"><a href="#cb1-526" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(disadvantage %in% c("Gap_vs_non_dis"))</span></span>
<span id="cb1-527"><a href="#cb1-527" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-528"><a href="#cb1-528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-529"><a href="#cb1-529" aria-hidden="true" tabindex="-1"></a><span class="in"># Filter out Brighton and Hove</span></span>
<span id="cb1-530"><a href="#cb1-530" aria-hidden="true" tabindex="-1"></a><span class="in">brighton_data &lt;- dis_vs_non_longer %&gt;%</span></span>
<span id="cb1-531"><a href="#cb1-531" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(lad_name == "Brighton and Hove")</span></span>
<span id="cb1-532"><a href="#cb1-532" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-533"><a href="#cb1-533" aria-hidden="true" tabindex="-1"></a><span class="in"># Create the ggplot point graph</span></span>
<span id="cb1-534"><a href="#cb1-534" aria-hidden="true" tabindex="-1"></a><span class="in">ggplot(dis_vs_non_longer, aes(x = pt_l2basics_95, y = lad_name)) +</span></span>
<span id="cb1-535"><a href="#cb1-535" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_point(aes(color = disadvantage)) +</span></span>
<span id="cb1-536"><a href="#cb1-536" aria-hidden="true" tabindex="-1"></a><span class="in">  theme_minimal() +</span></span>
<span id="cb1-537"><a href="#cb1-537" aria-hidden="true" tabindex="-1"></a><span class="in">  labs(</span></span>
<span id="cb1-538"><a href="#cb1-538" aria-hidden="true" tabindex="-1"></a><span class="in">    x = "Percentage of Disadvantaged, relative to non-disadvantaged \nAchieving 9-5 grades in English and Maths",</span></span>
<span id="cb1-539"><a href="#cb1-539" aria-hidden="true" tabindex="-1"></a><span class="in">    y = "",</span></span>
<span id="cb1-540"><a href="#cb1-540" aria-hidden="true" tabindex="-1"></a><span class="in">    title = "Attainment Gap, Disadvantaged as a Proportion of Non-Disadvantaged \n9-5 grades in English and Maths"</span></span>
<span id="cb1-541"><a href="#cb1-541" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb1-542"><a href="#cb1-542" aria-hidden="true" tabindex="-1"></a><span class="in">  theme(axis.text.y = element_blank()) +</span></span>
<span id="cb1-543"><a href="#cb1-543" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_point(data = brighton_data, aes(x = pt_l2basics_95, y = lad_name), color = "black", size = 3) </span></span>
<span id="cb1-544"><a href="#cb1-544" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-545"><a href="#cb1-545" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-546"><a href="#cb1-546" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-547"><a href="#cb1-547" aria-hidden="true" tabindex="-1"></a>But what about the gap? Given there is so much noise, it would make sense to try and standardise the gap by either disadvantaged or non-disadvantaged attainment. If we look at the gap relative to advantaged attainment – i.e. how do Disadvantaged students do relative to the performance of the advantaged students in the same local authority – a reasonable way of standardising - we get the plot above.</span>
<span id="cb1-548"><a href="#cb1-548" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-549"><a href="#cb1-549" aria-hidden="true" tabindex="-1"></a>What this shows is that in Brighton, the gap of 33.5% between disadvantaged (24%) and advantaged (57.5%) pupils is around 58% of that higher level of achievement in the city. Lower figures are better in this particular graph, so this gap is not in the top half of the English league table, but as the histogram above shows from the same data, this is because non-disadvantaged students are doing even better than the disadvantaged students, who are already doing better than average.</span>
<span id="cb1-550"><a href="#cb1-550" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-551"><a href="#cb1-551" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE, message=FALSE, warning=FALSE, error=FALSE}</span></span>
<span id="cb1-552"><a href="#cb1-552" aria-hidden="true" tabindex="-1"></a><span class="in">library(dplyr)</span></span>
<span id="cb1-553"><a href="#cb1-553" aria-hidden="true" tabindex="-1"></a><span class="in">library(ggplot2)</span></span>
<span id="cb1-554"><a href="#cb1-554" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-555"><a href="#cb1-555" aria-hidden="true" tabindex="-1"></a><span class="in"># Step 1: Pivot Wider</span></span>
<span id="cb1-556"><a href="#cb1-556" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_wider &lt;- dis_vs_non_filtered %&gt;%</span></span>
<span id="cb1-557"><a href="#cb1-557" aria-hidden="true" tabindex="-1"></a><span class="in">  pivot_wider(names_from = disadvantage, values_from = pt_l2basics_95)</span></span>
<span id="cb1-558"><a href="#cb1-558" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-559"><a href="#cb1-559" aria-hidden="true" tabindex="-1"></a><span class="in"># Step 2: Calculate Gap</span></span>
<span id="cb1-560"><a href="#cb1-560" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_wider &lt;- dis_vs_non_wider %&gt;%</span></span>
<span id="cb1-561"><a href="#cb1-561" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(Gap = `Disadvantaged all other` - Disadvantaged) %&gt;% </span></span>
<span id="cb1-562"><a href="#cb1-562" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(Gap_vs_non_dis = (Gap / `Disadvantaged all other`)*100)</span></span>
<span id="cb1-563"><a href="#cb1-563" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-564"><a href="#cb1-564" aria-hidden="true" tabindex="-1"></a><span class="in"># Step 3: Pivot Longer</span></span>
<span id="cb1-565"><a href="#cb1-565" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_longer &lt;- dis_vs_non_wider %&gt;%</span></span>
<span id="cb1-566"><a href="#cb1-566" aria-hidden="true" tabindex="-1"></a><span class="in">  pivot_longer(cols = c(`Disadvantaged all other`, Disadvantaged, Gap, Gap_vs_non_dis), names_to = "disadvantage", values_to = "pt_l2basics_95")</span></span>
<span id="cb1-567"><a href="#cb1-567" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-568"><a href="#cb1-568" aria-hidden="true" tabindex="-1"></a><span class="in"># Step 4: Adjust factor levels for lad_name based on 'Gap'</span></span>
<span id="cb1-569"><a href="#cb1-569" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_longer &lt;- dis_vs_non_longer %&gt;%</span></span>
<span id="cb1-570"><a href="#cb1-570" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(lad_name = factor(lad_name, levels = dis_vs_non_wider %&gt;% </span></span>
<span id="cb1-571"><a href="#cb1-571" aria-hidden="true" tabindex="-1"></a><span class="in">                            arrange(Disadvantaged) %&gt;%</span></span>
<span id="cb1-572"><a href="#cb1-572" aria-hidden="true" tabindex="-1"></a><span class="in">                            pull(lad_name))) </span></span>
<span id="cb1-573"><a href="#cb1-573" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-574"><a href="#cb1-574" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-575"><a href="#cb1-575" aria-hidden="true" tabindex="-1"></a><span class="in">filtered &lt;- dis_vs_non_longer %&gt;%</span></span>
<span id="cb1-576"><a href="#cb1-576" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(disadvantage == "Disadvantaged")</span></span>
<span id="cb1-577"><a href="#cb1-577" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-578"><a href="#cb1-578" aria-hidden="true" tabindex="-1"></a><span class="in"># Filter out Brighton and Hove</span></span>
<span id="cb1-579"><a href="#cb1-579" aria-hidden="true" tabindex="-1"></a><span class="in">brighton_data &lt;- filtered %&gt;%</span></span>
<span id="cb1-580"><a href="#cb1-580" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(lad_name == "Brighton and Hove")</span></span>
<span id="cb1-581"><a href="#cb1-581" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-582"><a href="#cb1-582" aria-hidden="true" tabindex="-1"></a><span class="in"># Calculate the median</span></span>
<span id="cb1-583"><a href="#cb1-583" aria-hidden="true" tabindex="-1"></a><span class="in">median_value &lt;- median(filtered$pt_l2basics_95)</span></span>
<span id="cb1-584"><a href="#cb1-584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-585"><a href="#cb1-585" aria-hidden="true" tabindex="-1"></a><span class="in"># Create the ggplot point graph with median line</span></span>
<span id="cb1-586"><a href="#cb1-586" aria-hidden="true" tabindex="-1"></a><span class="in">ggplot(filtered, aes(x = pt_l2basics_95, y = lad_name)) +</span></span>
<span id="cb1-587"><a href="#cb1-587" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_point(aes(color = region_name)) +</span></span>
<span id="cb1-588"><a href="#cb1-588" aria-hidden="true" tabindex="-1"></a><span class="in">  theme_minimal() +</span></span>
<span id="cb1-589"><a href="#cb1-589" aria-hidden="true" tabindex="-1"></a><span class="in">  labs(</span></span>
<span id="cb1-590"><a href="#cb1-590" aria-hidden="true" tabindex="-1"></a><span class="in">    x = "Percentage Achieving 9-5 grades in English and Maths",</span></span>
<span id="cb1-591"><a href="#cb1-591" aria-hidden="true" tabindex="-1"></a><span class="in">    y = "",</span></span>
<span id="cb1-592"><a href="#cb1-592" aria-hidden="true" tabindex="-1"></a><span class="in">    title = "Disadvantaged Percentage Achieving 9-5 grades in English and Maths"</span></span>
<span id="cb1-593"><a href="#cb1-593" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb1-594"><a href="#cb1-594" aria-hidden="true" tabindex="-1"></a><span class="in">  theme(axis.text.y = element_blank()) +</span></span>
<span id="cb1-595"><a href="#cb1-595" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_point(data = brighton_data, aes(x = pt_l2basics_95, y = lad_name), color = "black", size = 3) +</span></span>
<span id="cb1-596"><a href="#cb1-596" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_vline(xintercept = median_value, color = "grey", linetype = "dotted", size = 1.5) +</span></span>
<span id="cb1-597"><a href="#cb1-597" aria-hidden="true" tabindex="-1"></a><span class="in">  annotate("text", x = median_value, y = Inf, label = "Median", color = "grey", vjust = 1.5, angle = 90) +</span></span>
<span id="cb1-598"><a href="#cb1-598" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_text(data = brighton_data, aes(x = pt_l2basics_95, y = reorder(lad_name, pt_l2basics_95), label = lad_name), hjust = -0.1)</span></span>
<span id="cb1-599"><a href="#cb1-599" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-600"><a href="#cb1-600" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-601"><a href="#cb1-601" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-602"><a href="#cb1-602" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>One final plot adds a regional perspective - again, this is just disadvantaged pupils, but it's clear to see here the effect of London on the data. Brighton is in the top half of the country, a very large number of local authorities at the top of the distribution are in London.</span>
<span id="cb1-603"><a href="#cb1-603" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-604"><a href="#cb1-604" aria-hidden="true" tabindex="-1"></a><span class="fu">### GCSE Grade 4-9, English and Maths, 2024</span></span>
<span id="cb1-605"><a href="#cb1-605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-606"><a href="#cb1-606" aria-hidden="true" tabindex="-1"></a>For completeness, I have also included the same analysis for the 4-9 grades in English and Maths. What you will notice is Brighton is still above average, but attainment of disadvantaged pupils is closer to the national average than for 9-5 grades. My overall observations about the gap do not change, however, it is worth asking the question why the attainment gap appears even better than this in the recent work carried out by the Education Policy Institute?</span>
<span id="cb1-607"><a href="#cb1-607" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-608"><a href="#cb1-608" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE, message=FALSE, warning=FALSE, error=FALSE}</span></span>
<span id="cb1-609"><a href="#cb1-609" aria-hidden="true" tabindex="-1"></a><span class="in"># Select the relevant columns and order the data</span></span>
<span id="cb1-610"><a href="#cb1-610" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_ordered &lt;- dis_vs_non %&gt;%</span></span>
<span id="cb1-611"><a href="#cb1-611" aria-hidden="true" tabindex="-1"></a><span class="in">  select(lad_code, lad_name, disadvantage, pt_l2basics_94, UTLA23CD, UTLA23NM) %&gt;%</span></span>
<span id="cb1-612"><a href="#cb1-612" aria-hidden="true" tabindex="-1"></a><span class="in">  arrange(pt_l2basics_94)</span></span>
<span id="cb1-613"><a href="#cb1-613" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-614"><a href="#cb1-614" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_filtered &lt;- dis_vs_non %&gt;%</span></span>
<span id="cb1-615"><a href="#cb1-615" aria-hidden="true" tabindex="-1"></a><span class="in">  select(lad_name, disadvantage, pt_l2basics_94) %&gt;%</span></span>
<span id="cb1-616"><a href="#cb1-616" aria-hidden="true" tabindex="-1"></a><span class="in">  arrange(lad_name)</span></span>
<span id="cb1-617"><a href="#cb1-617" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-618"><a href="#cb1-618" aria-hidden="true" tabindex="-1"></a><span class="in"># Create a new dataframe grouped by UTLA23CD and summarise columns</span></span>
<span id="cb1-619"><a href="#cb1-619" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-620"><a href="#cb1-620" aria-hidden="true" tabindex="-1"></a><span class="in"># Create a new dataframe grouped by UTLA23CD and disadvantage</span></span>
<span id="cb1-621"><a href="#cb1-621" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_utla &lt;- dis_vs_non %&gt;%</span></span>
<span id="cb1-622"><a href="#cb1-622" aria-hidden="true" tabindex="-1"></a><span class="in">  group_by(UTLA23CD, UTLA23NM, disadvantage) %&gt;%</span></span>
<span id="cb1-623"><a href="#cb1-623" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(across(starts_with("t_"), sum, na.rm = TRUE), </span></span>
<span id="cb1-624"><a href="#cb1-624" aria-hidden="true" tabindex="-1"></a><span class="in">            across(starts_with("avg_"), mean, na.rm = TRUE),</span></span>
<span id="cb1-625"><a href="#cb1-625" aria-hidden="true" tabindex="-1"></a><span class="in">            across(starts_with("pt_"), mean, na.rm = TRUE),</span></span>
<span id="cb1-626"><a href="#cb1-626" aria-hidden="true" tabindex="-1"></a><span class="in">            .groups = 'drop') # ensures ungrouping after summarising</span></span>
<span id="cb1-627"><a href="#cb1-627" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-628"><a href="#cb1-628" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_utla_filtered &lt;- dis_vs_non_utla %&gt;%</span></span>
<span id="cb1-629"><a href="#cb1-629" aria-hidden="true" tabindex="-1"></a><span class="in">  select(UTLA23NM, disadvantage, t_pupils, t_l2basics_94) %&gt;%</span></span>
<span id="cb1-630"><a href="#cb1-630" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(pt_l2basics_94 = (t_l2basics_94 / t_pupils)*100) %&gt;%</span></span>
<span id="cb1-631"><a href="#cb1-631" aria-hidden="true" tabindex="-1"></a><span class="in">  arrange(pt_l2basics_94)</span></span>
<span id="cb1-632"><a href="#cb1-632" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-633"><a href="#cb1-633" aria-hidden="true" tabindex="-1"></a><span class="in"># Step 1: Pivot Wider</span></span>
<span id="cb1-634"><a href="#cb1-634" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-635"><a href="#cb1-635" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_utla_wider &lt;- dis_vs_non_utla_filtered %&gt;% </span></span>
<span id="cb1-636"><a href="#cb1-636" aria-hidden="true" tabindex="-1"></a><span class="in">  select(UTLA23NM, disadvantage, pt_l2basics_94) %&gt;%</span></span>
<span id="cb1-637"><a href="#cb1-637" aria-hidden="true" tabindex="-1"></a><span class="in">  pivot_wider(names_from = disadvantage, values_from = pt_l2basics_94)</span></span>
<span id="cb1-638"><a href="#cb1-638" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-639"><a href="#cb1-639" aria-hidden="true" tabindex="-1"></a><span class="in">#dis_vs_non_utla_wider &lt;- dis_vs_non_utla_filtered %&gt;%</span></span>
<span id="cb1-640"><a href="#cb1-640" aria-hidden="true" tabindex="-1"></a><span class="in">#  pivot_wider(names_from = disadvantage, values_from = pt_l2basics_94)</span></span>
<span id="cb1-641"><a href="#cb1-641" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-642"><a href="#cb1-642" aria-hidden="true" tabindex="-1"></a><span class="in"># Step 2: Calculate Gap</span></span>
<span id="cb1-643"><a href="#cb1-643" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-644"><a href="#cb1-644" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_utla_wider &lt;- dis_vs_non_utla_wider %&gt;%</span></span>
<span id="cb1-645"><a href="#cb1-645" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(Gap = `Disadvantaged all other` - Disadvantaged) %&gt;% </span></span>
<span id="cb1-646"><a href="#cb1-646" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(Gap_vs_total = (Gap / `Disadvantaged all other`)*100)</span></span>
<span id="cb1-647"><a href="#cb1-647" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-648"><a href="#cb1-648" aria-hidden="true" tabindex="-1"></a><span class="in"># Step 3: Pivot Longer</span></span>
<span id="cb1-649"><a href="#cb1-649" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-650"><a href="#cb1-650" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_utla_longer &lt;- dis_vs_non_utla_wider %&gt;%</span></span>
<span id="cb1-651"><a href="#cb1-651" aria-hidden="true" tabindex="-1"></a><span class="in">  pivot_longer(cols = c(`Disadvantaged all other`, Disadvantaged, Gap, Gap_vs_total), names_to = "disadvantage", values_to = "pt_l2basics_94")</span></span>
<span id="cb1-652"><a href="#cb1-652" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-653"><a href="#cb1-653" aria-hidden="true" tabindex="-1"></a><span class="in"># Step 4: Adjust factor levels for lad_name based on 'Gap'</span></span>
<span id="cb1-654"><a href="#cb1-654" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-655"><a href="#cb1-655" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_utla_longer &lt;- dis_vs_non_utla_longer %&gt;%</span></span>
<span id="cb1-656"><a href="#cb1-656" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(UTLA23NM = factor(UTLA23NM, levels = dis_vs_non_utla_wider %&gt;% </span></span>
<span id="cb1-657"><a href="#cb1-657" aria-hidden="true" tabindex="-1"></a><span class="in">                            arrange(Gap) %&gt;%</span></span>
<span id="cb1-658"><a href="#cb1-658" aria-hidden="true" tabindex="-1"></a><span class="in">                            pull(UTLA23NM))) %&gt;% </span></span>
<span id="cb1-659"><a href="#cb1-659" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(disadvantage %in% c("Disadvantaged", "Disadvantaged all other"))</span></span>
<span id="cb1-660"><a href="#cb1-660" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-661"><a href="#cb1-661" aria-hidden="true" tabindex="-1"></a><span class="in"># Filter out Brighton and Hove</span></span>
<span id="cb1-662"><a href="#cb1-662" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-663"><a href="#cb1-663" aria-hidden="true" tabindex="-1"></a><span class="in">brighton_utla_data &lt;- dis_vs_non_utla_longer %&gt;%</span></span>
<span id="cb1-664"><a href="#cb1-664" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(UTLA23NM == "Brighton and Hove")</span></span>
<span id="cb1-665"><a href="#cb1-665" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-666"><a href="#cb1-666" aria-hidden="true" tabindex="-1"></a><span class="in"># create medians</span></span>
<span id="cb1-667"><a href="#cb1-667" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-668"><a href="#cb1-668" aria-hidden="true" tabindex="-1"></a><span class="in">median_disadv_utla &lt;- dis_vs_non_utla_longer %&gt;%</span></span>
<span id="cb1-669"><a href="#cb1-669" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(disadvantage == "Disadvantaged") %&gt;%</span></span>
<span id="cb1-670"><a href="#cb1-670" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(median = median(pt_l2basics_94)) %&gt;%</span></span>
<span id="cb1-671"><a href="#cb1-671" aria-hidden="true" tabindex="-1"></a><span class="in">  pull(median)</span></span>
<span id="cb1-672"><a href="#cb1-672" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-673"><a href="#cb1-673" aria-hidden="true" tabindex="-1"></a><span class="in">median_non_disadv_utla &lt;- dis_vs_non_utla_longer %&gt;%</span></span>
<span id="cb1-674"><a href="#cb1-674" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(disadvantage == "Disadvantaged all other") %&gt;%</span></span>
<span id="cb1-675"><a href="#cb1-675" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(median = median(pt_l2basics_94)) %&gt;%</span></span>
<span id="cb1-676"><a href="#cb1-676" aria-hidden="true" tabindex="-1"></a><span class="in">  pull(median)</span></span>
<span id="cb1-677"><a href="#cb1-677" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-678"><a href="#cb1-678" aria-hidden="true" tabindex="-1"></a><span class="in"># Extract the value for Brighton and Hove for "Disadvantaged" and "Total"</span></span>
<span id="cb1-679"><a href="#cb1-679" aria-hidden="true" tabindex="-1"></a><span class="in">brighton_value_disadv &lt;- dis_vs_non_utla %&gt;%</span></span>
<span id="cb1-680"><a href="#cb1-680" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(UTLA23NM == "Brighton and Hove" &amp; disadvantage == "Disadvantaged") %&gt;%</span></span>
<span id="cb1-681"><a href="#cb1-681" aria-hidden="true" tabindex="-1"></a><span class="in">  pull(pt_l2basics_94)</span></span>
<span id="cb1-682"><a href="#cb1-682" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-683"><a href="#cb1-683" aria-hidden="true" tabindex="-1"></a><span class="in">brighton_value_total &lt;- dis_vs_non_utla %&gt;%</span></span>
<span id="cb1-684"><a href="#cb1-684" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(UTLA23NM == "Brighton and Hove" &amp; disadvantage == "Disadvantaged all other") %&gt;%</span></span>
<span id="cb1-685"><a href="#cb1-685" aria-hidden="true" tabindex="-1"></a><span class="in">  pull(pt_l2basics_94)</span></span>
<span id="cb1-686"><a href="#cb1-686" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-687"><a href="#cb1-687" aria-hidden="true" tabindex="-1"></a><span class="in"># # Create the ggplot point graph</span></span>
<span id="cb1-688"><a href="#cb1-688" aria-hidden="true" tabindex="-1"></a><span class="in"># </span></span>
<span id="cb1-689"><a href="#cb1-689" aria-hidden="true" tabindex="-1"></a><span class="in"># ggplot(dis_vs_non_utla_longer, aes(x = pt_l2basics_94, y = UTLA23NM)) +</span></span>
<span id="cb1-690"><a href="#cb1-690" aria-hidden="true" tabindex="-1"></a><span class="in">#   geom_point(aes(color = disadvantage)) +</span></span>
<span id="cb1-691"><a href="#cb1-691" aria-hidden="true" tabindex="-1"></a><span class="in">#   theme_minimal() +</span></span>
<span id="cb1-692"><a href="#cb1-692" aria-hidden="true" tabindex="-1"></a><span class="in">#   labs(</span></span>
<span id="cb1-693"><a href="#cb1-693" aria-hidden="true" tabindex="-1"></a><span class="in">#     x = "Percentage Achieving 9-5 grades in English and Maths",</span></span>
<span id="cb1-694"><a href="#cb1-694" aria-hidden="true" tabindex="-1"></a><span class="in">#     y = "",</span></span>
<span id="cb1-695"><a href="#cb1-695" aria-hidden="true" tabindex="-1"></a><span class="in">#     title = "Attainment Gap, Disadvantaged as a Proportion of Non-Disadvantaged \n9-5 grades in English and Maths"</span></span>
<span id="cb1-696"><a href="#cb1-696" aria-hidden="true" tabindex="-1"></a><span class="in">#   ) +</span></span>
<span id="cb1-697"><a href="#cb1-697" aria-hidden="true" tabindex="-1"></a><span class="in">#   theme(axis.text.y = element_blank()) +</span></span>
<span id="cb1-698"><a href="#cb1-698" aria-hidden="true" tabindex="-1"></a><span class="in">#   geom_point(data = brighton_utla_data, aes(x = pt_l2basics_94, y = UTLA23NM), color = "black", size = 3) +</span></span>
<span id="cb1-699"><a href="#cb1-699" aria-hidden="true" tabindex="-1"></a><span class="in">#   scale_color_manual(values = c("Disadvantaged" = "orange", "Disadvantaged all other" = "lightblue"),</span></span>
<span id="cb1-700"><a href="#cb1-700" aria-hidden="true" tabindex="-1"></a><span class="in">#                      labels = c("Disadvantaged", "Non-Disadvantaged"))</span></span>
<span id="cb1-701"><a href="#cb1-701" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-702"><a href="#cb1-702" aria-hidden="true" tabindex="-1"></a><span class="in"># create histogram</span></span>
<span id="cb1-703"><a href="#cb1-703" aria-hidden="true" tabindex="-1"></a><span class="in">ggplot() +</span></span>
<span id="cb1-704"><a href="#cb1-704" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_histogram(data = filter(dis_vs_non_utla, disadvantage == "Disadvantaged"), </span></span>
<span id="cb1-705"><a href="#cb1-705" aria-hidden="true" tabindex="-1"></a><span class="in">                 aes(x = pt_l2basics_94, fill = "Disadvantaged"), binwidth = 2, alpha = 0.5, position = "identity", color = "black") +</span></span>
<span id="cb1-706"><a href="#cb1-706" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_histogram(data = filter(dis_vs_non_utla, disadvantage == "Disadvantaged all other"), </span></span>
<span id="cb1-707"><a href="#cb1-707" aria-hidden="true" tabindex="-1"></a><span class="in">                 aes(x = pt_l2basics_94, fill = "Non-Disadvantaged"), binwidth = 2, alpha = 0.5, position = "identity", color = "black") +</span></span>
<span id="cb1-708"><a href="#cb1-708" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_vline(xintercept = brighton_value_disadv, color = "#fbb4b9", linetype = "dashed", size = 1.5) +</span></span>
<span id="cb1-709"><a href="#cb1-709" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_vline(xintercept = brighton_value_total, color = "#7a0177", linetype = "dashed", size = 1.5) +</span></span>
<span id="cb1-710"><a href="#cb1-710" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_vline(xintercept = median_disadv_utla, color = "#fbb4b9", linetype = "solid", size = 1.5) +</span></span>
<span id="cb1-711"><a href="#cb1-711" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_vline(xintercept = median_non_disadv_utla, color = "#7a0177", linetype = "solid", size = 1.5) +</span></span>
<span id="cb1-712"><a href="#cb1-712" aria-hidden="true" tabindex="-1"></a><span class="in">  annotate("text", x = brighton_value_disadv, y = Inf, label = "Brighton and Hove (Disadvantaged)", color = "#fbb4b9", vjust = 1.5, angle = 90) +</span></span>
<span id="cb1-713"><a href="#cb1-713" aria-hidden="true" tabindex="-1"></a><span class="in">  annotate("text", x = brighton_value_total, y = Inf, label = "Brighton and Hove (Non-Disadvantaged)", color = "#7a0177", vjust = 1.5, angle = 90) +</span></span>
<span id="cb1-714"><a href="#cb1-714" aria-hidden="true" tabindex="-1"></a><span class="in">  theme_minimal() +</span></span>
<span id="cb1-715"><a href="#cb1-715" aria-hidden="true" tabindex="-1"></a><span class="in">  labs(</span></span>
<span id="cb1-716"><a href="#cb1-716" aria-hidden="true" tabindex="-1"></a><span class="in">    title = "Percentage Achieving 9-4 grades in English and Maths,  \nAll England Local *Education* Authorities (Upper Tier)",</span></span>
<span id="cb1-717"><a href="#cb1-717" aria-hidden="true" tabindex="-1"></a><span class="in">    x = "Percentage Achieving 9-4 grades in English and Maths",</span></span>
<span id="cb1-718"><a href="#cb1-718" aria-hidden="true" tabindex="-1"></a><span class="in">    y = "Frequency",</span></span>
<span id="cb1-719"><a href="#cb1-719" aria-hidden="true" tabindex="-1"></a><span class="in">    fill = "Disadvantage"</span></span>
<span id="cb1-720"><a href="#cb1-720" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb1-721"><a href="#cb1-721" aria-hidden="true" tabindex="-1"></a><span class="in">  theme(title = ggtext::element_markdown()) +</span></span>
<span id="cb1-722"><a href="#cb1-722" aria-hidden="true" tabindex="-1"></a><span class="in">  scale_fill_manual(values = c("Disadvantaged" = "#fbb4b9", "Non-Disadvantaged" = "#7a0177"))</span></span>
<span id="cb1-723"><a href="#cb1-723" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-724"><a href="#cb1-724" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-725"><a href="#cb1-725" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-726"><a href="#cb1-726" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE, message=FALSE, warning=FALSE, error=FALSE}</span></span>
<span id="cb1-727"><a href="#cb1-727" aria-hidden="true" tabindex="-1"></a><span class="in"># Step 1: Pivot Wider</span></span>
<span id="cb1-728"><a href="#cb1-728" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_wider &lt;- dis_vs_non_filtered %&gt;%</span></span>
<span id="cb1-729"><a href="#cb1-729" aria-hidden="true" tabindex="-1"></a><span class="in">  pivot_wider(names_from = disadvantage, values_from = pt_l2basics_94)</span></span>
<span id="cb1-730"><a href="#cb1-730" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-731"><a href="#cb1-731" aria-hidden="true" tabindex="-1"></a><span class="in"># Step 2: Calculate Gap</span></span>
<span id="cb1-732"><a href="#cb1-732" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_wider &lt;- dis_vs_non_wider %&gt;%</span></span>
<span id="cb1-733"><a href="#cb1-733" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(Gap = `Disadvantaged all other` - Disadvantaged) %&gt;% </span></span>
<span id="cb1-734"><a href="#cb1-734" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(Gap_vs_total = (Gap / `Disadvantaged all other`)*100)</span></span>
<span id="cb1-735"><a href="#cb1-735" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-736"><a href="#cb1-736" aria-hidden="true" tabindex="-1"></a><span class="in"># Step 3: Pivot Longer</span></span>
<span id="cb1-737"><a href="#cb1-737" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_longer &lt;- dis_vs_non_wider %&gt;%</span></span>
<span id="cb1-738"><a href="#cb1-738" aria-hidden="true" tabindex="-1"></a><span class="in">  pivot_longer(cols = c(`Disadvantaged all other`, Disadvantaged, Gap, Gap_vs_total), names_to = "disadvantage", values_to = "pt_l2basics_94")</span></span>
<span id="cb1-739"><a href="#cb1-739" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-740"><a href="#cb1-740" aria-hidden="true" tabindex="-1"></a><span class="in"># Step 4: Adjust factor levels for lad_name based on 'Gap'</span></span>
<span id="cb1-741"><a href="#cb1-741" aria-hidden="true" tabindex="-1"></a><span class="in">dis_vs_non_longer &lt;- dis_vs_non_longer %&gt;%</span></span>
<span id="cb1-742"><a href="#cb1-742" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(lad_name = factor(lad_name, levels = dis_vs_non_wider %&gt;% </span></span>
<span id="cb1-743"><a href="#cb1-743" aria-hidden="true" tabindex="-1"></a><span class="in">                            arrange(Gap) %&gt;%</span></span>
<span id="cb1-744"><a href="#cb1-744" aria-hidden="true" tabindex="-1"></a><span class="in">                            pull(lad_name)))</span></span>
<span id="cb1-745"><a href="#cb1-745" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-746"><a href="#cb1-746" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-747"><a href="#cb1-747" aria-hidden="true" tabindex="-1"></a><span class="in"># Extract the value for Brighton and Hove for "Disadvantaged" and "Total"</span></span>
<span id="cb1-748"><a href="#cb1-748" aria-hidden="true" tabindex="-1"></a><span class="in">brighton_value_disadv &lt;- dis_vs_non_ordered %&gt;%</span></span>
<span id="cb1-749"><a href="#cb1-749" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(lad_name == "Brighton and Hove" &amp; disadvantage == "Disadvantaged") %&gt;%</span></span>
<span id="cb1-750"><a href="#cb1-750" aria-hidden="true" tabindex="-1"></a><span class="in">  pull(pt_l2basics_94)</span></span>
<span id="cb1-751"><a href="#cb1-751" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-752"><a href="#cb1-752" aria-hidden="true" tabindex="-1"></a><span class="in">brighton_value_total &lt;- dis_vs_non_ordered %&gt;%</span></span>
<span id="cb1-753"><a href="#cb1-753" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(lad_name == "Brighton and Hove" &amp; disadvantage == "Disadvantaged all other") %&gt;%</span></span>
<span id="cb1-754"><a href="#cb1-754" aria-hidden="true" tabindex="-1"></a><span class="in">  pull(pt_l2basics_94)</span></span>
<span id="cb1-755"><a href="#cb1-755" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-756"><a href="#cb1-756" aria-hidden="true" tabindex="-1"></a><span class="in"># Calculate medians</span></span>
<span id="cb1-757"><a href="#cb1-757" aria-hidden="true" tabindex="-1"></a><span class="in">median_disadv &lt;- dis_vs_non_ordered %&gt;%</span></span>
<span id="cb1-758"><a href="#cb1-758" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(disadvantage == "Disadvantaged") %&gt;%</span></span>
<span id="cb1-759"><a href="#cb1-759" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(median = median(pt_l2basics_94)) %&gt;%</span></span>
<span id="cb1-760"><a href="#cb1-760" aria-hidden="true" tabindex="-1"></a><span class="in">  pull(median)</span></span>
<span id="cb1-761"><a href="#cb1-761" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-762"><a href="#cb1-762" aria-hidden="true" tabindex="-1"></a><span class="in">median_total &lt;- dis_vs_non_ordered %&gt;%</span></span>
<span id="cb1-763"><a href="#cb1-763" aria-hidden="true" tabindex="-1"></a><span class="in">  filter(disadvantage == "Disadvantaged all other") %&gt;%</span></span>
<span id="cb1-764"><a href="#cb1-764" aria-hidden="true" tabindex="-1"></a><span class="in">  summarise(median = median(pt_l2basics_94)) %&gt;%</span></span>
<span id="cb1-765"><a href="#cb1-765" aria-hidden="true" tabindex="-1"></a><span class="in">  pull(median)</span></span>
<span id="cb1-766"><a href="#cb1-766" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-767"><a href="#cb1-767" aria-hidden="true" tabindex="-1"></a><span class="in"># Create the overlaid histograms with median lines</span></span>
<span id="cb1-768"><a href="#cb1-768" aria-hidden="true" tabindex="-1"></a><span class="in">ggplot() +</span></span>
<span id="cb1-769"><a href="#cb1-769" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_histogram(data = filter(dis_vs_non_ordered, disadvantage == "Disadvantaged"), </span></span>
<span id="cb1-770"><a href="#cb1-770" aria-hidden="true" tabindex="-1"></a><span class="in">                 aes(x = pt_l2basics_94, fill = "Disadvantaged"), binwidth = 2, alpha = 0.5, position = "identity", color = "black") +</span></span>
<span id="cb1-771"><a href="#cb1-771" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_histogram(data = filter(dis_vs_non_ordered, disadvantage == "Disadvantaged all other"), </span></span>
<span id="cb1-772"><a href="#cb1-772" aria-hidden="true" tabindex="-1"></a><span class="in">                 aes(x = pt_l2basics_94, fill = "Non-Disadvantaged"), binwidth = 2, alpha = 0.5, position = "identity", color = "black") +</span></span>
<span id="cb1-773"><a href="#cb1-773" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_vline(xintercept = brighton_value_disadv, color = "#fbb4b9", linetype = "dashed", size = 1.5) +</span></span>
<span id="cb1-774"><a href="#cb1-774" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_vline(xintercept = brighton_value_total, color = "#7a0177", linetype = "dashed", size = 1.5) +</span></span>
<span id="cb1-775"><a href="#cb1-775" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_vline(xintercept = median_disadv, color = "#fbb4b9", linetype = "solid", size = 1.5) +</span></span>
<span id="cb1-776"><a href="#cb1-776" aria-hidden="true" tabindex="-1"></a><span class="in">  geom_vline(xintercept = median_total, color = "#7a0177", linetype = "solid", size = 1.5) +</span></span>
<span id="cb1-777"><a href="#cb1-777" aria-hidden="true" tabindex="-1"></a><span class="in">  annotate("text", x = brighton_value_disadv, y = Inf, label = "Brighton and Hove (Disadvantaged)", color = "#fbb4b9", vjust = 1.5, angle = 90) +</span></span>
<span id="cb1-778"><a href="#cb1-778" aria-hidden="true" tabindex="-1"></a><span class="in">  annotate("text", x = brighton_value_total, y = Inf, label = "Brighton and Hove (Non-Disadvantaged)", color = "#7a0177", vjust = 1.5, angle = 90) +</span></span>
<span id="cb1-779"><a href="#cb1-779" aria-hidden="true" tabindex="-1"></a><span class="in">  theme_minimal() +</span></span>
<span id="cb1-780"><a href="#cb1-780" aria-hidden="true" tabindex="-1"></a><span class="in">  labs(</span></span>
<span id="cb1-781"><a href="#cb1-781" aria-hidden="true" tabindex="-1"></a><span class="in">    title = "Percentage Achieving 9-4 grades in English and Maths, \nAll England Local Authorities",</span></span>
<span id="cb1-782"><a href="#cb1-782" aria-hidden="true" tabindex="-1"></a><span class="in">    x = "Percentage Achieving 9-4 grades in English and Maths",</span></span>
<span id="cb1-783"><a href="#cb1-783" aria-hidden="true" tabindex="-1"></a><span class="in">    y = "Frequency",</span></span>
<span id="cb1-784"><a href="#cb1-784" aria-hidden="true" tabindex="-1"></a><span class="in">    fill = "Disadvantage"</span></span>
<span id="cb1-785"><a href="#cb1-785" aria-hidden="true" tabindex="-1"></a><span class="in">  ) +</span></span>
<span id="cb1-786"><a href="#cb1-786" aria-hidden="true" tabindex="-1"></a><span class="in">  scale_fill_manual(values = c("Disadvantaged" = "#fbb4b9", "Non-Disadvantaged" = "#7a0177"))</span></span>
<span id="cb1-787"><a href="#cb1-787" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb1-788"><a href="#cb1-788" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-789"><a href="#cb1-789" aria-hidden="true" tabindex="-1"></a><span class="fu">## The Education Policy Institute Work</span></span>
<span id="cb1-790"><a href="#cb1-790" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-791"><a href="#cb1-791" aria-hidden="true" tabindex="-1"></a>"The Education Policy Institute is an independent, impartial and evidence-based research institute that aims to promote high quality education outcomes for all children and young people, regardless of social background." (from their website - <span class="ot">&lt;https://epi.org.uk/our-mission-and-purpose/&gt;</span>)</span>
<span id="cb1-792"><a href="#cb1-792" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-793"><a href="#cb1-793" aria-hidden="true" tabindex="-1"></a>Every year they produce an annual report covering all aspects of educational inequalities in England and they are the gold-standard research organisation in this field.</span>
<span id="cb1-794"><a href="#cb1-794" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-795"><a href="#cb1-795" aria-hidden="true" tabindex="-1"></a>In their most recent report, the gap between disadvantaged and non-disadvantaged pupils in Brighton and Hove at the secondary level compared to the rest of the country is considerably better than is suggested by the aggregate statistics published by the DfE - <span class="ot">&lt;https://epi.org.uk/annual-report-2024-local-authority-gaps-2/&gt;</span></span>
<span id="cb1-796"><a href="#cb1-796" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-797"><a href="#cb1-797" aria-hidden="true" tabindex="-1"></a><span class="al">![](images/epi_brighton.png)</span></span>
<span id="cb1-798"><a href="#cb1-798" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-799"><a href="#cb1-799" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>In the interactive (on their site - visit via the link above) map above, we can see that, in the bottom left, rather than ranking near the bottom of the league table for education gap as the raw DfE data suggests, the EPI rank Brighton in the top third of all LEAs in England. Furthermore, it is one of the few LEAs that have shown improvement - a decline in disadvantage - since 2019 (bottom right).</span>
<span id="cb1-800"><a href="#cb1-800" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-801"><a href="#cb1-801" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>So what's going on? Well, in their methodology section, they explain some differences in how they measure disadvantage. <span class="ot">&lt;https://epi.org.uk/annual-report-2024-disadvantage-2/&gt;</span> - what they outline in their "How do we measure the disadvantage gap" box, they state that (through using the <span class="co">[</span><span class="ot">National Pupil Database</span><span class="co">](https://www.find-npd-data.education.gov.uk/categories)</span> (NPD) - which enables students to be tracked over time, rather than as a single-year snap-shot) they define disadvantage as any student who had received Free School Meals in the last 6-years. Therefore capturing a more comprehensive picture of disadvantage than a single year snapshot which might see some students go just over the very low threshold for free meals in one year.</span>
<span id="cb1-802"><a href="#cb1-802" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-803"><a href="#cb1-803" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Anything else? Yes, they also then order pupils and attainment by their rank for disadvantage and non-disadvantage and compare these ranks with each other - a method known as the 'mean rank difference'. This technique is useful where you have a skewed distribution of values - which we have here with London way out-performing other LAs and LEAs in the country.</span>
<span id="cb1-804"><a href="#cb1-804" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-805"><a href="#cb1-805" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>One more thing - as they have longitudinal pupil data from the NPD, they are able to express the attainment gap in months of learning - an intuitive measure which shows, on average, how many months earlier non-disadvantaged students attained the same level, relative to the disadvantaged students. The 2024 annual report local authority profiles also show that between KS2 and KS4, Brighton and Hove moves up the rankings considerably, giving even more weight to the observation that its secondary schools are performing well.</span>
<span id="cb1-806"><a href="#cb1-806" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-807"><a href="#cb1-807" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Given that the EPI are ***THE*** experts in the field of educational inequalities, rather than making errors with central tendency or arguing over aggregations of local authorities, it might be more useful for the Council to defer to this evidence from the EPI if there were ever any doubts that Brighton, relative to the rest of the Country and despite some acute problems, is actually doing an above average job of helping all of its students, already. Something that should be being built upon, rather than being torn down.</span>
<span id="cb1-808"><a href="#cb1-808" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-809"><a href="#cb1-809" aria-hidden="true" tabindex="-1"></a><span class="fu"># Conclusions</span></span>
<span id="cb1-810"><a href="#cb1-810" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-811"><a href="#cb1-811" aria-hidden="true" tabindex="-1"></a>Having carried out this new analysis and looked back at what I observed in my last piece, it doesn’t change very much at all in relation to the original interpretation of similar data I posted – indeed it places some of the conclusions on even firmer foundations, with only one small change in interpretation relative to the gap.</span>
<span id="cb1-812"><a href="#cb1-812" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-813"><a href="#cb1-813" aria-hidden="true" tabindex="-1"></a>Let’s take each one of my previous conclusions in turn:</span>
<span id="cb1-814"><a href="#cb1-814" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-815"><a href="#cb1-815" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>**Old interpretation** - Compared to the national average for England, Brighton’s attainment at GCSE for pupils on Free School Meals is lower, however, that national average is being pulled up considerably by London, which is performing between 6.5% and 15.1% better than the best-performing non-London region</span>
<span id="cb1-816"><a href="#cb1-816" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>**New interpretation** - Compared to the national average across all Local Authorities in England, Brighton’s attainment at GCSE for disadvantaged pupils is ***HIGHER***, and that national average is still being pulled up considerably by London, where most local authorities in the Capital are performing many percentage points higher than the best-performing non-London local authorities. If we take the 31 (In think City merges with Westminster) London Boroughs out of the equation - which all rank above Brighton and have 27 of the top 31 Local Authorities - Brighton would rank 76th out of 267 Local Authorities for disadvantaged attainment - put another way, this would be in the 3rd-best decile.</span>
<span id="cb1-817"><a href="#cb1-817" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>**Old interpretation -** If Brighton were one of these 33 regions, it would still be achieving better results for pupils on FSM than 2/3 of other places in England. If we take London out of the equation, it would appear in the top 5.</span>
<span id="cb1-818"><a href="#cb1-818" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>**New Interpretation** – For disadvantaged Pupils, Brighton ranks 107 out of 298 local authorities (in the dataset) on this level of attainment – this means it is achieving better results for disadvantaged pupils than in around 2/3 of other local authorities in England. If we take London out of the equation (which has 27 of the top 31 local authorities on this measure), it would rank considerably higher.</span>
<span id="cb1-819"><a href="#cb1-819" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>**Old interpretation -** Rather than being ‘a stain on our city’, it should be regarded as a badge of pride that Brighton and Hove is able to achieve such good results for pupils in receipt of Free School Meals, relative to the rest of England.</span>
<span id="cb1-820"><a href="#cb1-820" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>**New interpretation** - Rather than being ‘a stain on our city’, it should be regarded as a badge of pride that Brighton and Hove is able to achieve such good results for disadvantaged pupils, relative to the rest of England. It is performing above the national average already for both disadvantaged and non-disadvantaged students.</span>
<span id="cb1-821"><a href="#cb1-821" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>**Old interpretation** - If we look at the attainment gap between those who are on Free School Meals and those who aren’t as well, Brighton still performs far better than average, even with London in the equation. If Brighton were one of the regions above, it would be just outside the top 1/3.</span>
<span id="cb1-822"><a href="#cb1-822" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>**New Interpretation** - If we look at the attainment gap between disadvantaged pupils and non-disadvantaged pupils, Brighton performs worse than average if we look at the raw gap, even with London in the equation. If we look at the gap relative to the non-disadvantaged pupils in the city, it would rank 130th worst out of 298 lower-tier local authorities – so in the bottom half. However, if we examine the national medians for disadvantaged and non-disadvantaged, Brighton is above average for both and it’s larger gap is only because non-disadvantaged students are doing even better than average, not because disadvantaged students are doing worse than expected.</span>
<span id="cb1-823"><a href="#cb1-823" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Furthermore, research from the Education Policy Institute which uses more detailed longitudinal data to assign both disadvantage and measure progress gaps in months rather than grades and has a research design which is able to account for the biassing effects of London through using the mean rank difference, reveals that Brighton and Hove does even better on its education gap than the DfE data suggests. Indeed it is one of the few Local Authorities not only to have reduced its gap since 2019, but also shows a significant improvement between KS2 and KS4 - giving even more weight to the argument that its secondary schools are performing very well.</span>
<span id="cb1-824"><a href="#cb1-824" aria-hidden="true" tabindex="-1"></a><span class="ss">5.  </span>My comments on this being a distraction for the real problem existing in Whitehawk – still remain valid. I said it before and will re-iterate here: Statistics are incredibly useful tools for developing an understanding of systems of interest, but aggregation - however it is done - while revealing overall trends and patterns, can mask important concentrated local issues.</span>
<span id="cb1-825"><a href="#cb1-825" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>It has become very clear to me while doing this analysis over the last few weeks that there is a real and very acute problem with educational disadvantage in some parts of the city - and particularly in the near-East of the city here Whitehawk is located and where students from that part of town have no choice at the moment other than to travel further than other students in the city to attend Longhill.</span>
<span id="cb1-826"><a href="#cb1-826" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>The city is clearly already doing well for some of its disadvantaged students (disadvantage while is has some pockets of spatial concentration in the city, is also something which occurs across neighbourhoods). But it is not doing well for all.</span>
<span id="cb1-827"><a href="#cb1-827" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Casting the whole city as a failure - a community with a stain on it - is demonstrably unfair. The attainment gap owes more to high achievement for non-disadvantaged students than it does to under achievement for disadvantaged students, but that is not to say that we shouldn't try to do better for those students and bring the bottom end up. I would argue that if bringing the top end down reduces that gap - through forcing more non-disadvantaged students to travel long distances to attend school and impacting their learning, while it could be touted as a statistical victory, it would be a detriment to the city.</span>
<span id="cb1-828"><a href="#cb1-828" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>I will re-iterate. From all of the evidence I have seen, it is not clear to me at all that playing with catchment area boundaries and reducing the intakes for schools already doing incredible things to close the educational gaps in the city, will lead to better outcomes for those who are most disadvantaged. The council should focus its attention, not on ill-conceived tinkering, but in producing a serious long-term plan and more immediate actionable 'sticking plaster' option to help bridge the gap for the most deprived in the city.</span></code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/adamdennett/BH_Schools_2/blob/main/stain_removal.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li><li><a href="https://github.com/adamdennett/BH_Schools_2/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>